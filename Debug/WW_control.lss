
AVRASM ver. 2.2.7  D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm Tue Mar 28 14:50:43 2023

[builtin](2): Including file 'C:/Program Files (x86)\Atmel\Studio\7.0\Packs\atmel\ATmega_DFP\1.2.209\avrasm\inc\m16adef.inc'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(167): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\TWI_functions.asm'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(168): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\MainFunctions.asm'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(169): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\EncoderFunctions.asm'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(170): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\Timers.asm'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(171): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\UARTFunctions.asm'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(172): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\ADC.asm'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(173): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\TimeCorrect.asm'
[builtin](2): Including file 'C:/Program Files (x86)\Atmel\Studio\7.0\Packs\atmel\ATmega_DFP\1.2.209\avrasm\inc\m16adef.inc'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(167): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\TWI_functions.asm'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(168): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\MainFunctions.asm'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(169): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\EncoderFunctions.asm'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(170): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\Timers.asm'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(171): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\UARTFunctions.asm'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(172): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\ADC.asm'
D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\main.asm(173): Including file 'D:\PROJECTS_HFSS\PROJECTS_HFSS\Atmel Studio\Asm\Wall_watch_ver_2\Main\WW_control\TimeCorrect.asm'
                                 
                                 ;
                                 
                                 ;***** Created: 2011-02-09 12:03 ******* Source: ATmega16A.xml ***********
                                 ;*************************************************************************
                                 ;* A P P L I C A T I O N   N O T E   F O R   T H E   A V R   F A M I L Y
                                 ;* 
                                 ;* Number            : AVR000
                                 ;* File Name         : "m16Adef.inc"
                                 ;* Title             : Register/Bit Definitions for the ATmega16A
                                 ;* Date              : 2011-02-09
                                 ;* Version           : 2.35
                                 ;* Support E-mail    : avr@atmel.com
                                 ;* Target MCU        : ATmega16A
                                 ;* 
                                 ;* DESCRIPTION
                                 ;* When including this file in the assembly program file, all I/O register 
                                 ;* names and I/O register bit names appearing in the data book can be used.
                                 ;* In addition, the six registers forming the three data pointers X, Y and 
                                 ;* Z have been assigned names XL - ZH. Highest RAM address for Internal 
                                 ;* SRAM is also defined 
                                 ;* 
                                 ;* The Register names are represented by their hexadecimal address.
                                 ;* 
                                 ;* The Register Bit names are represented by their bit number (0-7).
                                 ;* 
                                 ;* Please observe the difference in using the bit names with instructions
                                 ;* such as "sbr"/"cbr" (set/clear bit in register) and "sbrs"/"sbrc"
                                 ;* (skip if bit in register set/cleared). The following example illustrates
                                 ;* this:
                                 ;* 
                                 ;* in    r16,PORTB             ;read PORTB latch
                                 ;* sbr   r16,(1<<PB6)+(1<<PB5) ;set PB6 and PB5 (use masks, not bit#)
                                 ;* out   PORTB,r16             ;output to PORTB
                                 ;* 
                                 ;* in    r16,TIFR              ;read the Timer Interrupt Flag Register
                                 ;* sbrc  r16,TOV0              ;test the overflow flag (use bit#)
                                 ;* rjmp  TOV0_is_set           ;jump if set
                                 ;* ...                         ;otherwise do something else
                                 ;*************************************************************************
                                 
                                 #ifndef _M16ADEF_INC_
                                 #define _M16ADEF_INC_
                                 
                                 
                                 #pragma partinc 0
                                 
                                 ; ***** SPECIFY DEVICE ***************************************************
                                 .device ATmega16A
                                 #pragma AVRPART ADMIN PART_NAME ATmega16A
                                 .equ	SIGNATURE_000	= 0x1e
                                 .equ	SIGNATURE_001	= 0x94
                                 .equ	SIGNATURE_002	= 0x03
                                 
                                 #pragma AVRPART CORE CORE_VERSION V2E
                                 
                                 
                                 ; ***** I/O REGISTER DEFINITIONS *****************************************
                                 ; NOTE:
                                 ; Definitions marked "MEMORY MAPPED"are extended I/O ports
                                 ; and cannot be used with IN/OUT instructions
                                 .equ	SREG	= 0x3f
                                 .equ	SPL	= 0x3d
                                 .equ	SPH	= 0x3e
                                 .equ	OCR0	= 0x3c
                                 .equ	GICR	= 0x3b
                                 .equ	GIFR	= 0x3a
                                 .equ	TIMSK	= 0x39
                                 .equ	TIFR	= 0x38
                                 .equ	SPMCSR	= 0x37
                                 .equ	TWCR	= 0x36
                                 .equ	MCUCR	= 0x35
                                 .equ	MCUCSR	= 0x34
                                 .equ	TCCR0	= 0x33
                                 .equ	TCNT0	= 0x32
                                 .equ	OSCCAL	= 0x31
                                 .equ	OCDR	= 0x31
                                 .equ	SFIOR	= 0x30
                                 .equ	TCCR1A	= 0x2f
                                 .equ	TCCR1B	= 0x2e
                                 .equ	TCNT1L	= 0x2c
                                 .equ	TCNT1H	= 0x2d
                                 .equ	OCR1AL	= 0x2a
                                 .equ	OCR1AH	= 0x2b
                                 .equ	OCR1BL	= 0x28
                                 .equ	OCR1BH	= 0x29
                                 .equ	ICR1L	= 0x26
                                 .equ	ICR1H	= 0x27
                                 .equ	TCCR2	= 0x25
                                 .equ	TCNT2	= 0x24
                                 .equ	OCR2	= 0x23
                                 .equ	ASSR	= 0x22
                                 .equ	WDTCR	= 0x21
                                 .equ	UBRRH	= 0x20
                                 .equ	UCSRC	= 0x20
                                 .equ	EEARL	= 0x1e
                                 .equ	EEARH	= 0x1f
                                 .equ	EEDR	= 0x1d
                                 .equ	EECR	= 0x1c
                                 .equ	PORTA	= 0x1b
                                 .equ	DDRA	= 0x1a
                                 .equ	PINA	= 0x19
                                 .equ	PORTB	= 0x18
                                 .equ	DDRB	= 0x17
                                 .equ	PINB	= 0x16
                                 .equ	PORTC	= 0x15
                                 .equ	DDRC	= 0x14
                                 .equ	PINC	= 0x13
                                 .equ	PORTD	= 0x12
                                 .equ	DDRD	= 0x11
                                 .equ	PIND	= 0x10
                                 .equ	SPDR	= 0x0f
                                 .equ	SPSR	= 0x0e
                                 .equ	SPCR	= 0x0d
                                 .equ	UDR	= 0x0c
                                 .equ	UCSRA	= 0x0b
                                 .equ	UCSRB	= 0x0a
                                 .equ	UBRRL	= 0x09
                                 .equ	ACSR	= 0x08
                                 .equ	ADMUX	= 0x07
                                 .equ	ADCSRA	= 0x06
                                 .equ	ADCH	= 0x05
                                 .equ	ADCL	= 0x04
                                 .equ	TWDR	= 0x03
                                 .equ	TWAR	= 0x02
                                 .equ	TWSR	= 0x01
                                 .equ	TWBR	= 0x00
                                 
                                 
                                 ; ***** BIT DEFINITIONS **************************************************
                                 
                                 ; ***** TIMER_COUNTER_0 **************
                                 ; TCCR0 - Timer/Counter Control Register
                                 .equ	CS00	= 0	; Clock Select 1
                                 .equ	CS01	= 1	; Clock Select 1
                                 .equ	CS02	= 2	; Clock Select 2
                                 .equ	WGM01	= 3	; Waveform Generation Mode 1
                                 .equ	CTC0	= WGM01	; For compatibility
                                 .equ	COM00	= 4	; Compare match Output Mode 0
                                 .equ	COM01	= 5	; Compare Match Output Mode 1
                                 .equ	WGM00	= 6	; Waveform Generation Mode 0
                                 .equ	PWM0	= WGM00	; For compatibility
                                 .equ	FOC0	= 7	; Force Output Compare
                                 
                                 ; TCNT0 - Timer/Counter Register
                                 .equ	TCNT0_0	= 0	; 
                                 .equ	TCNT0_1	= 1	; 
                                 .equ	TCNT0_2	= 2	; 
                                 .equ	TCNT0_3	= 3	; 
                                 .equ	TCNT0_4	= 4	; 
                                 .equ	TCNT0_5	= 5	; 
                                 .equ	TCNT0_6	= 6	; 
                                 .equ	TCNT0_7	= 7	; 
                                 
                                 ; OCR0 - Output Compare Register
                                 .equ	OCR0_0	= 0	; 
                                 .equ	OCR0_1	= 1	; 
                                 .equ	OCR0_2	= 2	; 
                                 .equ	OCR0_3	= 3	; 
                                 .equ	OCR0_4	= 4	; 
                                 .equ	OCR0_5	= 5	; 
                                 .equ	OCR0_6	= 6	; 
                                 .equ	OCR0_7	= 7	; 
                                 
                                 ; TIMSK - Timer/Counter Interrupt Mask Register
                                 .equ	TOIE0	= 0	; Timer/Counter0 Overflow Interrupt Enable
                                 .equ	OCIE0	= 1	; Timer/Counter0 Output Compare Match Interrupt register
                                 
                                 ; TIFR - Timer/Counter Interrupt Flag register
                                 .equ	TOV0	= 0	; Timer/Counter0 Overflow Flag
                                 .equ	OCF0	= 1	; Output Compare Flag 0
                                 
                                 ; SFIOR - Special Function IO Register
                                 .equ	PSR10	= 0	; Prescaler Reset Timer/Counter1 and Timer/Counter0
                                 
                                 
                                 ; ***** TIMER_COUNTER_1 **************
                                 ; TIMSK - Timer/Counter Interrupt Mask Register
                                 .equ	TOIE1	= 2	; Timer/Counter1 Overflow Interrupt Enable
                                 .equ	OCIE1B	= 3	; Timer/Counter1 Output CompareB Match Interrupt Enable
                                 .equ	OCIE1A	= 4	; Timer/Counter1 Output CompareA Match Interrupt Enable
                                 .equ	TICIE1	= 5	; Timer/Counter1 Input Capture Interrupt Enable
                                 
                                 ; TIFR - Timer/Counter Interrupt Flag register
                                 .equ	TOV1	= 2	; Timer/Counter1 Overflow Flag
                                 .equ	OCF1B	= 3	; Output Compare Flag 1B
                                 .equ	OCF1A	= 4	; Output Compare Flag 1A
                                 .equ	ICF1	= 5	; Input Capture Flag 1
                                 
                                 ; TCCR1A - Timer/Counter1 Control Register A
                                 .equ	WGM10	= 0	; Waveform Generation Mode
                                 .equ	PWM10	= WGM10	; For compatibility
                                 .equ	WGM11	= 1	; Waveform Generation Mode
                                 .equ	PWM11	= WGM11	; For compatibility
                                 .equ	FOC1B	= 2	; Force Output Compare 1B
                                 .equ	FOC1A	= 3	; Force Output Compare 1A
                                 .equ	COM1B0	= 4	; Compare Output Mode 1B, bit 0
                                 .equ	COM1B1	= 5	; Compare Output Mode 1B, bit 1
                                 .equ	COM1A0	= 6	; Compare Ouput Mode 1A, bit 0
                                 .equ	COM1A1	= 7	; Compare Output Mode 1A, bit 1
                                 
                                 ; TCCR1B - Timer/Counter1 Control Register B
                                 .equ	CS10	= 0	; Prescaler source of Timer/Counter 1
                                 .equ	CS11	= 1	; Prescaler source of Timer/Counter 1
                                 .equ	CS12	= 2	; Prescaler source of Timer/Counter 1
                                 .equ	WGM12	= 3	; Waveform Generation Mode
                                 .equ	CTC10	= WGM12	; For compatibility
                                 .equ	CTC1	= WGM12	; For compatibility
                                 .equ	WGM13	= 4	; Waveform Generation Mode
                                 .equ	CTC11	= WGM13	; For compatibility
                                 .equ	ICES1	= 6	; Input Capture 1 Edge Select
                                 .equ	ICNC1	= 7	; Input Capture 1 Noise Canceler
                                 
                                 
                                 ; ***** EXTERNAL_INTERRUPT ***********
                                 ; GICR - General Interrupt Control Register
                                 .equ	GIMSK	= GICR	; For compatibility
                                 .equ	IVCE	= 0	; Interrupt Vector Change Enable
                                 .equ	IVSEL	= 1	; Interrupt Vector Select
                                 .equ	INT2	= 5	; External Interrupt Request 2 Enable
                                 .equ	INT0	= 6	; External Interrupt Request 0 Enable
                                 .equ	INT1	= 7	; External Interrupt Request 1 Enable
                                 
                                 ; GIFR - General Interrupt Flag Register
                                 .equ	INTF2	= 5	; External Interrupt Flag 2
                                 .equ	INTF0	= 6	; External Interrupt Flag 0
                                 .equ	INTF1	= 7	; External Interrupt Flag 1
                                 
                                 ; MCUCR - General Interrupt Control Register
                                 .equ	ISC00	= 0	; Interrupt Sense Control 0 Bit 0
                                 .equ	ISC01	= 1	; Interrupt Sense Control 0 Bit 1
                                 .equ	ISC10	= 2	; Interrupt Sense Control 1 Bit 0
                                 .equ	ISC11	= 3	; Interrupt Sense Control 1 Bit 1
                                 
                                 ; MCUCSR - MCU Control And Status Register
                                 .equ	ISC2	= 6	; Interrupt Sense Control 2
                                 
                                 
                                 ; ***** EEPROM ***********************
                                 ; EEDR - EEPROM Data Register
                                 .equ	EEDR0	= 0	; EEPROM Data Register bit 0
                                 .equ	EEDR1	= 1	; EEPROM Data Register bit 1
                                 .equ	EEDR2	= 2	; EEPROM Data Register bit 2
                                 .equ	EEDR3	= 3	; EEPROM Data Register bit 3
                                 .equ	EEDR4	= 4	; EEPROM Data Register bit 4
                                 .equ	EEDR5	= 5	; EEPROM Data Register bit 5
                                 .equ	EEDR6	= 6	; EEPROM Data Register bit 6
                                 .equ	EEDR7	= 7	; EEPROM Data Register bit 7
                                 
                                 ; EECR - EEPROM Control Register
                                 .equ	EERE	= 0	; EEPROM Read Enable
                                 .equ	EEWE	= 1	; EEPROM Write Enable
                                 .equ	EEMWE	= 2	; EEPROM Master Write Enable
                                 .equ	EEWEE	= EEMWE	; For compatibility
                                 .equ	EERIE	= 3	; EEPROM Ready Interrupt Enable
                                 
                                 
                                 ; ***** CPU **************************
                                 ; SREG - Status Register
                                 .equ	SREG_C	= 0	; Carry Flag
                                 .equ	SREG_Z	= 1	; Zero Flag
                                 .equ	SREG_N	= 2	; Negative Flag
                                 .equ	SREG_V	= 3	; Two's Complement Overflow Flag
                                 .equ	SREG_S	= 4	; Sign Bit
                                 .equ	SREG_H	= 5	; Half Carry Flag
                                 .equ	SREG_T	= 6	; Bit Copy Storage
                                 .equ	SREG_I	= 7	; Global Interrupt Enable
                                 
                                 ; MCUCR - MCU Control Register
                                 ;.equ	ISC00	= 0	; Interrupt Sense Control 0 Bit 0
                                 ;.equ	ISC01	= 1	; Interrupt Sense Control 0 Bit 1
                                 ;.equ	ISC10	= 2	; Interrupt Sense Control 1 Bit 0
                                 ;.equ	ISC11	= 3	; Interrupt Sense Control 1 Bit 1
                                 .equ	SM0	= 4	; Sleep Mode Select
                                 .equ	SM1	= 5	; Sleep Mode Select
                                 .equ	SE	= 6	; Sleep Enable
                                 .equ	SM2	= 7	; Sleep Mode Select
                                 
                                 ; MCUCSR - MCU Control And Status Register
                                 .equ	MCUSR	= MCUCSR	; For compatibility
                                 .equ	PORF	= 0	; Power-on reset flag
                                 .equ	EXTRF	= 1	; External Reset Flag
                                 .equ	EXTREF	= EXTRF	; For compatibility
                                 .equ	BORF	= 2	; Brown-out Reset Flag
                                 .equ	WDRF	= 3	; Watchdog Reset Flag
                                 .equ	JTRF	= 4	; JTAG Reset Flag
                                 .equ	JTD	= 7	; JTAG Interface Disable
                                 
                                 ; OSCCAL - Oscillator Calibration Value
                                 .equ	CAL0	= 0	; Oscillator Calibration Value Bit0
                                 .equ	CAL1	= 1	; Oscillator Calibration Value Bit1
                                 .equ	CAL2	= 2	; Oscillator Calibration Value Bit2
                                 .equ	CAL3	= 3	; Oscillator Calibration Value Bit3
                                 .equ	CAL4	= 4	; Oscillator Calibration Value Bit4
                                 .equ	CAL5	= 5	; Oscillator Calibration Value Bit5
                                 .equ	CAL6	= 6	; Oscillator Calibration Value Bit6
                                 .equ	CAL7	= 7	; Oscillator Calibration Value Bit7
                                 
                                 ; SFIOR - Special function I/O register
                                 ;.equ	PSR10	= 0	; Prescaler reset
                                 .equ	PSR2	= 1	; Prescaler reset
                                 .equ	PUD	= 2	; Pull-up Disable
                                 
                                 
                                 ; ***** TIMER_COUNTER_2 **************
                                 ; TIMSK - Timer/Counter Interrupt Mask register
                                 .equ	TOIE2	= 6	; Timer/Counter2 Overflow Interrupt Enable
                                 .equ	OCIE2	= 7	; Timer/Counter2 Output Compare Match Interrupt Enable
                                 
                                 ; TIFR - Timer/Counter Interrupt Flag Register
                                 .equ	TOV2	= 6	; Timer/Counter2 Overflow Flag
                                 .equ	OCF2	= 7	; Output Compare Flag 2
                                 
                                 ; TCCR2 - Timer/Counter2 Control Register
                                 .equ	CS20	= 0	; Clock Select bit 0
                                 .equ	CS21	= 1	; Clock Select bit 1
                                 .equ	CS22	= 2	; Clock Select bit 2
                                 .equ	WGM21	= 3	; Waveform Generation Mode
                                 .equ	CTC2	= WGM21	; For compatibility
                                 .equ	COM20	= 4	; Compare Output Mode bit 0
                                 .equ	COM21	= 5	; Compare Output Mode bit 1
                                 .equ	WGM20	= 6	; Waveform Genration Mode
                                 .equ	PWM2	= WGM20	; For compatibility
                                 .equ	FOC2	= 7	; Force Output Compare
                                 
                                 ; TCNT2 - Timer/Counter2
                                 .equ	TCNT2_0	= 0	; Timer/Counter 2 bit 0
                                 .equ	TCNT2_1	= 1	; Timer/Counter 2 bit 1
                                 .equ	TCNT2_2	= 2	; Timer/Counter 2 bit 2
                                 .equ	TCNT2_3	= 3	; Timer/Counter 2 bit 3
                                 .equ	TCNT2_4	= 4	; Timer/Counter 2 bit 4
                                 .equ	TCNT2_5	= 5	; Timer/Counter 2 bit 5
                                 .equ	TCNT2_6	= 6	; Timer/Counter 2 bit 6
                                 .equ	TCNT2_7	= 7	; Timer/Counter 2 bit 7
                                 
                                 ; OCR2 - Timer/Counter2 Output Compare Register
                                 .equ	OCR2_0	= 0	; Timer/Counter2 Output Compare Register Bit 0
                                 .equ	OCR2_1	= 1	; Timer/Counter2 Output Compare Register Bit 1
                                 .equ	OCR2_2	= 2	; Timer/Counter2 Output Compare Register Bit 2
                                 .equ	OCR2_3	= 3	; Timer/Counter2 Output Compare Register Bit 3
                                 .equ	OCR2_4	= 4	; Timer/Counter2 Output Compare Register Bit 4
                                 .equ	OCR2_5	= 5	; Timer/Counter2 Output Compare Register Bit 5
                                 .equ	OCR2_6	= 6	; Timer/Counter2 Output Compare Register Bit 6
                                 .equ	OCR2_7	= 7	; Timer/Counter2 Output Compare Register Bit 7
                                 
                                 ; ASSR - Asynchronous Status Register
                                 .equ	TCR2UB	= 0	; Timer/counter Control Register2 Update Busy
                                 .equ	OCR2UB	= 1	; Output Compare Register2 Update Busy
                                 .equ	TCN2UB	= 2	; Timer/Counter2 Update Busy
                                 .equ	AS2	= 3	; Asynchronous Timer/counter2
                                 
                                 ; SFIOR - Special Function IO Register
                                 ;.equ	PSR2	= 1	; Prescaler Reset Timer/Counter2
                                 
                                 
                                 ; ***** SPI **************************
                                 ; SPDR - SPI Data Register
                                 .equ	SPDR0	= 0	; SPI Data Register bit 0
                                 .equ	SPDR1	= 1	; SPI Data Register bit 1
                                 .equ	SPDR2	= 2	; SPI Data Register bit 2
                                 .equ	SPDR3	= 3	; SPI Data Register bit 3
                                 .equ	SPDR4	= 4	; SPI Data Register bit 4
                                 .equ	SPDR5	= 5	; SPI Data Register bit 5
                                 .equ	SPDR6	= 6	; SPI Data Register bit 6
                                 .equ	SPDR7	= 7	; SPI Data Register bit 7
                                 
                                 ; SPSR - SPI Status Register
                                 .equ	SPI2X	= 0	; Double SPI Speed Bit
                                 .equ	WCOL	= 6	; Write Collision Flag
                                 .equ	SPIF	= 7	; SPI Interrupt Flag
                                 
                                 ; SPCR - SPI Control Register
                                 .equ	SPR0	= 0	; SPI Clock Rate Select 0
                                 .equ	SPR1	= 1	; SPI Clock Rate Select 1
                                 .equ	CPHA	= 2	; Clock Phase
                                 .equ	CPOL	= 3	; Clock polarity
                                 .equ	MSTR	= 4	; Master/Slave Select
                                 .equ	DORD	= 5	; Data Order
                                 .equ	SPE	= 6	; SPI Enable
                                 .equ	SPIE	= 7	; SPI Interrupt Enable
                                 
                                 
                                 ; ***** USART ************************
                                 ; UDR - USART I/O Data Register
                                 .equ	UDR0	= 0	; USART I/O Data Register bit 0
                                 .equ	UDR1	= 1	; USART I/O Data Register bit 1
                                 .equ	UDR2	= 2	; USART I/O Data Register bit 2
                                 .equ	UDR3	= 3	; USART I/O Data Register bit 3
                                 .equ	UDR4	= 4	; USART I/O Data Register bit 4
                                 .equ	UDR5	= 5	; USART I/O Data Register bit 5
                                 .equ	UDR6	= 6	; USART I/O Data Register bit 6
                                 .equ	UDR7	= 7	; USART I/O Data Register bit 7
                                 
                                 ; UCSRA - USART Control and Status Register A
                                 .equ	USR	= UCSRA	; For compatibility
                                 .equ	MPCM	= 0	; Multi-processor Communication Mode
                                 .equ	U2X	= 1	; Double the USART transmission speed
                                 .equ	UPE	= 2	; Parity Error
                                 .equ	PE	= UPE	; For compatibility
                                 .equ	DOR	= 3	; Data overRun
                                 .equ	FE	= 4	; Framing Error
                                 .equ	UDRE	= 5	; USART Data Register Empty
                                 .equ	TXC	= 6	; USART Transmitt Complete
                                 .equ	RXC	= 7	; USART Receive Complete
                                 
                                 ; UCSRB - USART Control and Status Register B
                                 .equ	UCR	= UCSRB	; For compatibility
                                 .equ	TXB8	= 0	; Transmit Data Bit 8
                                 .equ	RXB8	= 1	; Receive Data Bit 8
                                 .equ	UCSZ2	= 2	; Character Size
                                 .equ	CHR9	= UCSZ2	; For compatibility
                                 .equ	TXEN	= 3	; Transmitter Enable
                                 .equ	RXEN	= 4	; Receiver Enable
                                 .equ	UDRIE	= 5	; USART Data register Empty Interrupt Enable
                                 .equ	TXCIE	= 6	; TX Complete Interrupt Enable
                                 .equ	RXCIE	= 7	; RX Complete Interrupt Enable
                                 
                                 ; UCSRC - USART Control and Status Register C
                                 .equ	UCPOL	= 0	; Clock Polarity
                                 .equ	UCSZ0	= 1	; Character Size
                                 .equ	UCSZ1	= 2	; Character Size
                                 .equ	USBS	= 3	; Stop Bit Select
                                 .equ	UPM0	= 4	; Parity Mode Bit 0
                                 .equ	UPM1	= 5	; Parity Mode Bit 1
                                 .equ	UMSEL	= 6	; USART Mode Select
                                 .equ	URSEL	= 7	; Register Select
                                 
                                 .equ	UBRRHI	= UBRRH	; For compatibility
                                 
                                 ; ***** TWI **************************
                                 ; TWBR - TWI Bit Rate register
                                 .equ	I2BR	= TWBR	; For compatibility
                                 .equ	TWBR0	= 0	; 
                                 .equ	TWBR1	= 1	; 
                                 .equ	TWBR2	= 2	; 
                                 .equ	TWBR3	= 3	; 
                                 .equ	TWBR4	= 4	; 
                                 .equ	TWBR5	= 5	; 
                                 .equ	TWBR6	= 6	; 
                                 .equ	TWBR7	= 7	; 
                                 
                                 ; TWCR - TWI Control Register
                                 .equ	I2CR	= TWCR	; For compatibility
                                 .equ	TWIE	= 0	; TWI Interrupt Enable
                                 .equ	I2IE	= TWIE	; For compatibility
                                 .equ	TWEN	= 2	; TWI Enable Bit
                                 .equ	I2EN	= TWEN	; For compatibility
                                 .equ	ENI2C	= TWEN	; For compatibility
                                 .equ	TWWC	= 3	; TWI Write Collition Flag
                                 .equ	I2WC	= TWWC	; For compatibility
                                 .equ	TWSTO	= 4	; TWI Stop Condition Bit
                                 .equ	I2STO	= TWSTO	; For compatibility
                                 .equ	TWSTA	= 5	; TWI Start Condition Bit
                                 .equ	I2STA	= TWSTA	; For compatibility
                                 .equ	TWEA	= 6	; TWI Enable Acknowledge Bit
                                 .equ	I2EA	= TWEA	; For compatibility
                                 .equ	TWINT	= 7	; TWI Interrupt Flag
                                 .equ	I2INT	= TWINT	; For compatibility
                                 
                                 ; TWSR - TWI Status Register
                                 .equ	I2SR	= TWSR	; For compatibility
                                 .equ	TWPS0	= 0	; TWI Prescaler
                                 .equ	TWS0	= TWPS0	; For compatibility
                                 .equ	I2GCE	= TWPS0	; For compatibility
                                 .equ	TWPS1	= 1	; TWI Prescaler
                                 .equ	TWS1	= TWPS1	; For compatibility
                                 .equ	TWS3	= 3	; TWI Status
                                 .equ	I2S3	= TWS3	; For compatibility
                                 .equ	TWS4	= 4	; TWI Status
                                 .equ	I2S4	= TWS4	; For compatibility
                                 .equ	TWS5	= 5	; TWI Status
                                 .equ	I2S5	= TWS5	; For compatibility
                                 .equ	TWS6	= 6	; TWI Status
                                 .equ	I2S6	= TWS6	; For compatibility
                                 .equ	TWS7	= 7	; TWI Status
                                 .equ	I2S7	= TWS7	; For compatibility
                                 
                                 ; TWDR - TWI Data register
                                 .equ	I2DR	= TWDR	; For compatibility
                                 .equ	TWD0	= 0	; TWI Data Register Bit 0
                                 .equ	TWD1	= 1	; TWI Data Register Bit 1
                                 .equ	TWD2	= 2	; TWI Data Register Bit 2
                                 .equ	TWD3	= 3	; TWI Data Register Bit 3
                                 .equ	TWD4	= 4	; TWI Data Register Bit 4
                                 .equ	TWD5	= 5	; TWI Data Register Bit 5
                                 .equ	TWD6	= 6	; TWI Data Register Bit 6
                                 .equ	TWD7	= 7	; TWI Data Register Bit 7
                                 
                                 ; TWAR - TWI (Slave) Address register
                                 .equ	I2AR	= TWAR	; For compatibility
                                 .equ	TWGCE	= 0	; TWI General Call Recognition Enable Bit
                                 .equ	TWA0	= 1	; TWI (Slave) Address register Bit 0
                                 .equ	TWA1	= 2	; TWI (Slave) Address register Bit 1
                                 .equ	TWA2	= 3	; TWI (Slave) Address register Bit 2
                                 .equ	TWA3	= 4	; TWI (Slave) Address register Bit 3
                                 .equ	TWA4	= 5	; TWI (Slave) Address register Bit 4
                                 .equ	TWA5	= 6	; TWI (Slave) Address register Bit 5
                                 .equ	TWA6	= 7	; TWI (Slave) Address register Bit 6
                                 
                                 
                                 ; ***** ANALOG_COMPARATOR ************
                                 ; SFIOR - Special Function IO Register
                                 .equ	ACME	= 3	; Analog Comparator Multiplexer Enable
                                 
                                 ; ACSR - Analog Comparator Control And Status Register
                                 .equ	ACIS0	= 0	; Analog Comparator Interrupt Mode Select bit 0
                                 .equ	ACIS1	= 1	; Analog Comparator Interrupt Mode Select bit 1
                                 .equ	ACIC	= 2	; Analog Comparator Input Capture Enable
                                 .equ	ACIE	= 3	; Analog Comparator Interrupt Enable
                                 .equ	ACI	= 4	; Analog Comparator Interrupt Flag
                                 .equ	ACO	= 5	; Analog Compare Output
                                 .equ	ACBG	= 6	; Analog Comparator Bandgap Select
                                 .equ	ACD	= 7	; Analog Comparator Disable
                                 
                                 
                                 ; ***** AD_CONVERTER *****************
                                 ; ADMUX - The ADC multiplexer Selection Register
                                 .equ	MUX0	= 0	; Analog Channel and Gain Selection Bits
                                 .equ	MUX1	= 1	; Analog Channel and Gain Selection Bits
                                 .equ	MUX2	= 2	; Analog Channel and Gain Selection Bits
                                 .equ	MUX3	= 3	; Analog Channel and Gain Selection Bits
                                 .equ	MUX4	= 4	; Analog Channel and Gain Selection Bits
                                 .equ	ADLAR	= 5	; Left Adjust Result
                                 .equ	REFS0	= 6	; Reference Selection Bit 0
                                 .equ	REFS1	= 7	; Reference Selection Bit 1
                                 
                                 ; ADCSRA - The ADC Control and Status register
                                 .equ	ADCSR	= ADCSRA	; For compatibility
                                 .equ	ADPS0	= 0	; ADC  Prescaler Select Bits
                                 .equ	ADPS1	= 1	; ADC  Prescaler Select Bits
                                 .equ	ADPS2	= 2	; ADC  Prescaler Select Bits
                                 .equ	ADIE	= 3	; ADC Interrupt Enable
                                 .equ	ADIF	= 4	; ADC Interrupt Flag
                                 .equ	ADATE	= 5	; When this bit is written to one,the Timer/Counter2 prescaler will be reset.The bit will be cleared by hardware after the operation is performed.Writing a zero to this bit will have no effect.This bit will always be read as zero if Timer/C                                 ounter2 is clocked by the internal CPU clock.If this bit is written when Timer/Counter2 is operating in asynchronous mode,the bit will remain one until the prescaler has been reset.
                                 .equ	ADFR	= ADATE	; For compatibility
                                 .equ	ADSC	= 6	; ADC Start Conversion
                                 .equ	ADEN	= 7	; ADC Enable
                                 
                                 ; ADCH - ADC Data Register High Byte
                                 .equ	ADCH0	= 0	; ADC Data Register High Byte Bit 0
                                 .equ	ADCH1	= 1	; ADC Data Register High Byte Bit 1
                                 .equ	ADCH2	= 2	; ADC Data Register High Byte Bit 2
                                 .equ	ADCH3	= 3	; ADC Data Register High Byte Bit 3
                                 .equ	ADCH4	= 4	; ADC Data Register High Byte Bit 4
                                 .equ	ADCH5	= 5	; ADC Data Register High Byte Bit 5
                                 .equ	ADCH6	= 6	; ADC Data Register High Byte Bit 6
                                 .equ	ADCH7	= 7	; ADC Data Register High Byte Bit 7
                                 
                                 ; ADCL - ADC Data Register Low Byte
                                 .equ	ADCL0	= 0	; ADC Data Register Low Byte Bit 0
                                 .equ	ADCL1	= 1	; ADC Data Register Low Byte Bit 1
                                 .equ	ADCL2	= 2	; ADC Data Register Low Byte Bit 2
                                 .equ	ADCL3	= 3	; ADC Data Register Low Byte Bit 3
                                 .equ	ADCL4	= 4	; ADC Data Register Low Byte Bit 4
                                 .equ	ADCL5	= 5	; ADC Data Register Low Byte Bit 5
                                 .equ	ADCL6	= 6	; ADC Data Register Low Byte Bit 6
                                 .equ	ADCL7	= 7	; ADC Data Register Low Byte Bit 7
                                 
                                 ; SFIOR - Special Function IO Register
                                 .equ	ADTS0	= 5	; ADC Auto Trigger Source 0
                                 .equ	ADTS1	= 6	; ADC Auto Trigger Source 1
                                 .equ	ADTS2	= 7	; ADC Auto Trigger Source 2
                                 
                                 
                                 ; ***** JTAG *************************
                                 ; OCDR - On-Chip Debug Related Register in I/O Memory
                                 .equ	OCDR0	= 0	; On-Chip Debug Register Bit 0
                                 .equ	OCDR1	= 1	; On-Chip Debug Register Bit 1
                                 .equ	OCDR2	= 2	; On-Chip Debug Register Bit 2
                                 .equ	OCDR3	= 3	; On-Chip Debug Register Bit 3
                                 .equ	OCDR4	= 4	; On-Chip Debug Register Bit 4
                                 .equ	OCDR5	= 5	; On-Chip Debug Register Bit 5
                                 .equ	OCDR6	= 6	; On-Chip Debug Register Bit 6
                                 .equ	OCDR7	= 7	; On-Chip Debug Register Bit 7
                                 .equ	IDRD	= OCDR7	; For compatibility
                                 
                                 ; MCUCSR - MCU Control And Status Register
                                 ;.equ	JTRF	= 4	; JTAG Reset Flag
                                 ;.equ	JTD	= 7	; JTAG Interface Disable
                                 
                                 
                                 ; ***** BOOT_LOAD ********************
                                 ; SPMCSR - Store Program Memory Control Register
                                 .equ	SPMCR	= SPMCSR	; For compatibility
                                 .equ	SPMEN	= 0	; Store Program Memory Enable
                                 .equ	PGERS	= 1	; Page Erase
                                 .equ	PGWRT	= 2	; Page Write
                                 .equ	BLBSET	= 3	; Boot Lock Bit Set
                                 .equ	RWWSRE	= 4	; Read While Write section read enable
                                 .equ	ASRE	= RWWSRE	; For compatibility
                                 .equ	RWWSB	= 6	; Read While Write Section Busy
                                 .equ	ASB	= RWWSB	; For compatibility
                                 .equ	SPMIE	= 7	; SPM Interrupt Enable
                                 
                                 
                                 ; ***** PORTA ************************
                                 ; PORTA - Port A Data Register
                                 .equ	PORTA0	= 0	; Port A Data Register bit 0
                                 .equ	PA0	= 0	; For compatibility
                                 .equ	PORTA1	= 1	; Port A Data Register bit 1
                                 .equ	PA1	= 1	; For compatibility
                                 .equ	PORTA2	= 2	; Port A Data Register bit 2
                                 .equ	PA2	= 2	; For compatibility
                                 .equ	PORTA3	= 3	; Port A Data Register bit 3
                                 .equ	PA3	= 3	; For compatibility
                                 .equ	PORTA4	= 4	; Port A Data Register bit 4
                                 .equ	PA4	= 4	; For compatibility
                                 .equ	PORTA5	= 5	; Port A Data Register bit 5
                                 .equ	PA5	= 5	; For compatibility
                                 .equ	PORTA6	= 6	; Port A Data Register bit 6
                                 .equ	PA6	= 6	; For compatibility
                                 .equ	PORTA7	= 7	; Port A Data Register bit 7
                                 .equ	PA7	= 7	; For compatibility
                                 
                                 ; DDRA - Port A Data Direction Register
                                 .equ	DDA0	= 0	; Data Direction Register, Port A, bit 0
                                 .equ	DDA1	= 1	; Data Direction Register, Port A, bit 1
                                 .equ	DDA2	= 2	; Data Direction Register, Port A, bit 2
                                 .equ	DDA3	= 3	; Data Direction Register, Port A, bit 3
                                 .equ	DDA4	= 4	; Data Direction Register, Port A, bit 4
                                 .equ	DDA5	= 5	; Data Direction Register, Port A, bit 5
                                 .equ	DDA6	= 6	; Data Direction Register, Port A, bit 6
                                 .equ	DDA7	= 7	; Data Direction Register, Port A, bit 7
                                 
                                 ; PINA - Port A Input Pins
                                 .equ	PINA0	= 0	; Input Pins, Port A bit 0
                                 .equ	PINA1	= 1	; Input Pins, Port A bit 1
                                 .equ	PINA2	= 2	; Input Pins, Port A bit 2
                                 .equ	PINA3	= 3	; Input Pins, Port A bit 3
                                 .equ	PINA4	= 4	; Input Pins, Port A bit 4
                                 .equ	PINA5	= 5	; Input Pins, Port A bit 5
                                 .equ	PINA6	= 6	; Input Pins, Port A bit 6
                                 .equ	PINA7	= 7	; Input Pins, Port A bit 7
                                 
                                 
                                 ; ***** PORTB ************************
                                 ; PORTB - Port B Data Register
                                 .equ	PORTB0	= 0	; Port B Data Register bit 0
                                 .equ	PB0	= 0	; For compatibility
                                 .equ	PORTB1	= 1	; Port B Data Register bit 1
                                 .equ	PB1	= 1	; For compatibility
                                 .equ	PORTB2	= 2	; Port B Data Register bit 2
                                 .equ	PB2	= 2	; For compatibility
                                 .equ	PORTB3	= 3	; Port B Data Register bit 3
                                 .equ	PB3	= 3	; For compatibility
                                 .equ	PORTB4	= 4	; Port B Data Register bit 4
                                 .equ	PB4	= 4	; For compatibility
                                 .equ	PORTB5	= 5	; Port B Data Register bit 5
                                 .equ	PB5	= 5	; For compatibility
                                 .equ	PORTB6	= 6	; Port B Data Register bit 6
                                 .equ	PB6	= 6	; For compatibility
                                 .equ	PORTB7	= 7	; Port B Data Register bit 7
                                 .equ	PB7	= 7	; For compatibility
                                 
                                 ; DDRB - Port B Data Direction Register
                                 .equ	DDB0	= 0	; Port B Data Direction Register bit 0
                                 .equ	DDB1	= 1	; Port B Data Direction Register bit 1
                                 .equ	DDB2	= 2	; Port B Data Direction Register bit 2
                                 .equ	DDB3	= 3	; Port B Data Direction Register bit 3
                                 .equ	DDB4	= 4	; Port B Data Direction Register bit 4
                                 .equ	DDB5	= 5	; Port B Data Direction Register bit 5
                                 .equ	DDB6	= 6	; Port B Data Direction Register bit 6
                                 .equ	DDB7	= 7	; Port B Data Direction Register bit 7
                                 
                                 ; PINB - Port B Input Pins
                                 .equ	PINB0	= 0	; Port B Input Pins bit 0
                                 .equ	PINB1	= 1	; Port B Input Pins bit 1
                                 .equ	PINB2	= 2	; Port B Input Pins bit 2
                                 .equ	PINB3	= 3	; Port B Input Pins bit 3
                                 .equ	PINB4	= 4	; Port B Input Pins bit 4
                                 .equ	PINB5	= 5	; Port B Input Pins bit 5
                                 .equ	PINB6	= 6	; Port B Input Pins bit 6
                                 .equ	PINB7	= 7	; Port B Input Pins bit 7
                                 
                                 
                                 ; ***** PORTC ************************
                                 ; PORTC - Port C Data Register
                                 .equ	PORTC0	= 0	; Port C Data Register bit 0
                                 .equ	PC0	= 0	; For compatibility
                                 .equ	PORTC1	= 1	; Port C Data Register bit 1
                                 .equ	PC1	= 1	; For compatibility
                                 .equ	PORTC2	= 2	; Port C Data Register bit 2
                                 .equ	PC2	= 2	; For compatibility
                                 .equ	PORTC3	= 3	; Port C Data Register bit 3
                                 .equ	PC3	= 3	; For compatibility
                                 .equ	PORTC4	= 4	; Port C Data Register bit 4
                                 .equ	PC4	= 4	; For compatibility
                                 .equ	PORTC5	= 5	; Port C Data Register bit 5
                                 .equ	PC5	= 5	; For compatibility
                                 .equ	PORTC6	= 6	; Port C Data Register bit 6
                                 .equ	PC6	= 6	; For compatibility
                                 .equ	PORTC7	= 7	; Port C Data Register bit 7
                                 .equ	PC7	= 7	; For compatibility
                                 
                                 ; DDRC - Port C Data Direction Register
                                 .equ	DDC0	= 0	; Port C Data Direction Register bit 0
                                 .equ	DDC1	= 1	; Port C Data Direction Register bit 1
                                 .equ	DDC2	= 2	; Port C Data Direction Register bit 2
                                 .equ	DDC3	= 3	; Port C Data Direction Register bit 3
                                 .equ	DDC4	= 4	; Port C Data Direction Register bit 4
                                 .equ	DDC5	= 5	; Port C Data Direction Register bit 5
                                 .equ	DDC6	= 6	; Port C Data Direction Register bit 6
                                 .equ	DDC7	= 7	; Port C Data Direction Register bit 7
                                 
                                 ; PINC - Port C Input Pins
                                 .equ	PINC0	= 0	; Port C Input Pins bit 0
                                 .equ	PINC1	= 1	; Port C Input Pins bit 1
                                 .equ	PINC2	= 2	; Port C Input Pins bit 2
                                 .equ	PINC3	= 3	; Port C Input Pins bit 3
                                 .equ	PINC4	= 4	; Port C Input Pins bit 4
                                 .equ	PINC5	= 5	; Port C Input Pins bit 5
                                 .equ	PINC6	= 6	; Port C Input Pins bit 6
                                 .equ	PINC7	= 7	; Port C Input Pins bit 7
                                 
                                 
                                 ; ***** PORTD ************************
                                 ; PORTD - Port D Data Register
                                 .equ	PORTD0	= 0	; Port D Data Register bit 0
                                 .equ	PD0	= 0	; For compatibility
                                 .equ	PORTD1	= 1	; Port D Data Register bit 1
                                 .equ	PD1	= 1	; For compatibility
                                 .equ	PORTD2	= 2	; Port D Data Register bit 2
                                 .equ	PD2	= 2	; For compatibility
                                 .equ	PORTD3	= 3	; Port D Data Register bit 3
                                 .equ	PD3	= 3	; For compatibility
                                 .equ	PORTD4	= 4	; Port D Data Register bit 4
                                 .equ	PD4	= 4	; For compatibility
                                 .equ	PORTD5	= 5	; Port D Data Register bit 5
                                 .equ	PD5	= 5	; For compatibility
                                 .equ	PORTD6	= 6	; Port D Data Register bit 6
                                 .equ	PD6	= 6	; For compatibility
                                 .equ	PORTD7	= 7	; Port D Data Register bit 7
                                 .equ	PD7	= 7	; For compatibility
                                 
                                 ; DDRD - Port D Data Direction Register
                                 .equ	DDD0	= 0	; Port D Data Direction Register bit 0
                                 .equ	DDD1	= 1	; Port D Data Direction Register bit 1
                                 .equ	DDD2	= 2	; Port D Data Direction Register bit 2
                                 .equ	DDD3	= 3	; Port D Data Direction Register bit 3
                                 .equ	DDD4	= 4	; Port D Data Direction Register bit 4
                                 .equ	DDD5	= 5	; Port D Data Direction Register bit 5
                                 .equ	DDD6	= 6	; Port D Data Direction Register bit 6
                                 .equ	DDD7	= 7	; Port D Data Direction Register bit 7
                                 
                                 ; PIND - Port D Input Pins
                                 .equ	PIND0	= 0	; Port D Input Pins bit 0
                                 .equ	PIND1	= 1	; Port D Input Pins bit 1
                                 .equ	PIND2	= 2	; Port D Input Pins bit 2
                                 .equ	PIND3	= 3	; Port D Input Pins bit 3
                                 .equ	PIND4	= 4	; Port D Input Pins bit 4
                                 .equ	PIND5	= 5	; Port D Input Pins bit 5
                                 .equ	PIND6	= 6	; Port D Input Pins bit 6
                                 .equ	PIND7	= 7	; Port D Input Pins bit 7
                                 
                                 
                                 ; ***** WATCHDOG *********************
                                 ; WDTCR - Watchdog Timer Control Register
                                 .equ	WDP0	= 0	; Watch Dog Timer Prescaler bit 0
                                 .equ	WDP1	= 1	; Watch Dog Timer Prescaler bit 1
                                 .equ	WDP2	= 2	; Watch Dog Timer Prescaler bit 2
                                 .equ	WDE	= 3	; Watch Dog Enable
                                 .equ	WDTOE	= 4	; RW
                                 .equ	WDDE	= WDTOE	; For compatibility
                                 
                                 
                                 
                                 ; ***** LOCKSBITS ********************************************************
                                 .equ	LB1	= 0	; Lock bit
                                 .equ	LB2	= 1	; Lock bit
                                 .equ	BLB01	= 2	; Boot Lock bit
                                 .equ	BLB02	= 3	; Boot Lock bit
                                 .equ	BLB11	= 4	; Boot lock bit
                                 .equ	BLB12	= 5	; Boot lock bit
                                 
                                 
                                 ; ***** FUSES ************************************************************
                                 ; LOW fuse bits
                                 .equ	CKSEL0	= 0	; Select Clock Source
                                 .equ	CKSEL1	= 1	; Select Clock Source
                                 .equ	CKSEL2	= 2	; Select Clock Source
                                 .equ	CKSEL3	= 3	; Select Clock Source
                                 .equ	SUT0	= 4	; Select start-up time
                                 .equ	SUT1	= 5	; Select start-up time
                                 .equ	BODEN	= 6	; Brown out detector enable
                                 .equ	BODLEVEL	= 7	; Brown out detector trigger level
                                 
                                 ; HIGH fuse bits
                                 .equ	BOOTRST	= 0	; Select Reset Vector
                                 .equ	BOOTSZ0	= 1	; Select Boot Size
                                 .equ	BOOTSZ1	= 2	; Select Boot Size
                                 .equ	EESAVE	= 3	; EEPROM memory is preserved through chip erase
                                 .equ	CKOPT	= 4	; Oscillator Options
                                 .equ	SPIEN	= 5	; Enable Serial programming and Data Downloading
                                 .equ	JTAGEN	= 6	; Enable JTAG
                                 .equ	OCDEN	= 7	; Enable OCD
                                 
                                 
                                 
                                 ; ***** CPU REGISTER DEFINITIONS *****************************************
                                 .def	XH	= r27
                                 .def	XL	= r26
                                 .def	YH	= r29
                                 .def	YL	= r28
                                 .def	ZH	= r31
                                 .def	ZL	= r30
                                 
                                 
                                 
                                 ; ***** DATA MEMORY DECLARATIONS *****************************************
                                 .equ	FLASHEND	= 0x1fff	; Note: Word address
                                 .equ	IOEND	= 0x003f
                                 .equ	SRAM_START	= 0x0060
                                 .equ	SRAM_SIZE	= 1024
                                 .equ	RAMEND	= 0x045f
                                 .equ	XRAMEND	= 0x0000
                                 .equ	E2END	= 0x01ff
                                 .equ	EEPROMEND	= 0x01ff
                                 .equ	EEADRBITS	= 9
                                 #pragma AVRPART MEMORY PROG_FLASH 16384
                                 #pragma AVRPART MEMORY EEPROM 512
                                 #pragma AVRPART MEMORY INT_SRAM SIZE 1024
                                 #pragma AVRPART MEMORY INT_SRAM START_ADDR 0x60
                                 
                                 
                                 
                                 ; ***** BOOTLOADER DECLARATIONS ******************************************
                                 .equ	NRWW_START_ADDR	= 0x1c00
                                 .equ	NRWW_STOP_ADDR	= 0x1fff
                                 .equ	RWW_START_ADDR	= 0x0
                                 .equ	RWW_STOP_ADDR	= 0x1bff
                                 .equ	PAGESIZE	= 64
                                 .equ	FIRSTBOOTSTART	= 0x1f80
                                 .equ	SECONDBOOTSTART	= 0x1f00
                                 .equ	THIRDBOOTSTART	= 0x1e00
                                 .equ	FOURTHBOOTSTART	= 0x1c00
                                 .equ	SMALLBOOTSTART	= FIRSTBOOTSTART
                                 .equ	LARGEBOOTSTART	= FOURTHBOOTSTART
                                 
                                 
                                 
                                 ; ***** INTERRUPT VECTORS ************************************************
                                 .equ	INT0addr	= 0x0002	; External Interrupt Request 0
                                 .equ	INT1addr	= 0x0004	; External Interrupt Request 1
                                 .equ	OC2addr	= 0x0006	; Timer/Counter2 Compare Match
                                 .equ	OVF2addr	= 0x0008	; Timer/Counter2 Overflow
                                 .equ	ICP1addr	= 0x000a	; Timer/Counter1 Capture Event
                                 .equ	OC1Aaddr	= 0x000c	; Timer/Counter1 Compare Match A
                                 .equ	OC1Baddr	= 0x000e	; Timer/Counter1 Compare Match B
                                 .equ	OVF1addr	= 0x0010	; Timer/Counter1 Overflow
                                 .equ	OVF0addr	= 0x0012	; Timer/Counter0 Overflow
                                 .equ	SPIaddr	= 0x0014	; Serial Transfer Complete
                                 .equ	URXCaddr	= 0x0016	; USART, Rx Complete
                                 .equ	UDREaddr	= 0x0018	; USART Data Register Empty
                                 .equ	UTXCaddr	= 0x001a	; USART, Tx Complete
                                 .equ	ADCCaddr	= 0x001c	; ADC Conversion Complete
                                 .equ	ERDYaddr	= 0x001e	; EEPROM Ready
                                 .equ	ACIaddr	= 0x0020	; Analog Comparator
                                 .equ	TWIaddr	= 0x0022	; 2-wire Serial Interface
                                 .equ	INT2addr	= 0x0024	; External Interrupt Request 2
                                 .equ	OC0addr	= 0x0026	; Timer/Counter0 Compare Match
                                 .equ	SPMRaddr	= 0x0028	; Store Program Memory Ready
                                 
                                 .equ	INT_VECTORS_SIZE	= 42	; size in words
                                 
                                 #endif  /* _M16ADEF_INC_ */
                                 
                                 
                                 ; WW_control.asm
                                 ;
                                 /*
                                    .
                                 */
                                 ; Created: 30.06.2019 11:50:16
                                 ; Author : Asus
                                 ;
                                 
                                 
                                 .def	seconds					=	r0
                                 .def	minutes					=	r1
                                 .def	round					=	r2
                                 .def	sec_work				=	r3
                                 .def	min_work				=	r4
                                 .def	round_work				=	r5
                                 .def	sec_rest				=	r6
                                 .def	min_rest				=	r7
                                 .def	sdi_high_time			=	r8
                                 .def	sdi_low_time			=	r9
                                 .def	sdi_high_data			=	r10
                                 .def	sdi_low_data			=	r11
                                 .def	mbi_clk_counter			=	r12
                                 .def	digit_count				=	r13
                                 .def	set_segm				=	r14
                                 .def	byte_address			=	r15
                                 .def	templ					=	r16
                                 .def	temph					=	r17
                                 .def	temp_2					=	r18
                                 .def	temp_3					=	r19
                                 .def	state_flag				=	r20
                                 .def	status					=	r21
                                 .def	twi_packet_size			=	r22
                                 .def	count					=	r23
                                 .def	t_count					=	r24
                                 .def	enc_state				=	r25
                                 
                                 .equ	WWVM					=	0											//Wall Watch Visual Mode - clock(0) or timer(1) 
                                 .equ	WWSM					=	1											//Wall Watch Set Mode - not set(0) or set (1)
                                 .equ	WWFF					=	2											//Wall Watch Flicking Flag - light on(0) or off(1)
                                 .equ	SDBL					=	3											//Second Digit Bytes Load - first(0) or second(1)
                                 .equ	RPTF					=	4											//Read Packet Timer Flag read (1) or not read(0)
                                 .equ	BTON					=	5											//Boxing Timer ON timer on(1) or off(0)
                                 .equ	BTRT					=	6											//Boxing Timer Rest Time rest(1) or work(0)
                                 .equ	BTPS					=	7											//Boxing Timer PauSe pause(1) or play(0)
                                 .equ	EMPF					=	6											//Encoder Minus Plus Flag - parameter minus(0) or plus(1)
                                 .equ	T2IF					=	7											//Timer2 Interrupt Flag
                                 .equ	BUTTON					=	2
                                 .equ	ENC_PLUS				=	3
                                 .equ	ENC_MINUS				=	4
                                 
                                 .equ	F_CPU					=	16000000
                                 .equ	F_TWI					=	100000
                                 .equ	F_TIMER2_CLK			=	244
                                 .equ	F_TIMER2_BT				=	244
                                 .equ	F_1000Hz				=	1000
                                 .equ	F_400Hz					=	400
                                 .equ	F_TIMER1				=	100000
                                 .equ	OCR0_1000Hz				=	((F_CPU)/(2*256*F_1000Hz))-1
                                 .equ	OCR0_400Hz				=	((F_CPU)/(2*256*F_400Hz))-1
                                 .equ	OCR1_REG				=	((F_CPU)/(F_TIMER1))-1
                                 .equ	BAUD_RATE				=	2400
                                 .equ	TWI_BAUD				=	(F_CPU/(2*F_TWI))-8
                                 .equ	USART_REG				=	(F_CPU/(16*BAUD_RATE))-1
                                 .equ	PRESCALER_2_CLK			=	(LOG2((F_CPU)/(256*F_TIMER2_CLK))) - 2
                                 .equ	PRESCALER_2_BT			=	(LOG2((F_CPU)/(256*F_TIMER2_BT))) - 2
                                 .equ	PORT_ANODE				=	PORTC
                                 .equ	PORT_CATHODE			=	PORTA
                                 .equ	DDR_ANODE				=	DDRC
                                 .equ	DDR_CATHODE				=	DDRA
                                 .equ	OE						=	1
                                 .equ	CLK						=	3
                                 .equ	LE						=	4
                                 .equ	SDI_TIME				=	2
                                 .equ	SDI_DATA				=	5
                                 
                                 
                                 
                                 .org	0
000000 940c 0024                 jmp		reset
                                 .org	OVF2addr
000008 940c 0542                 jmp		Timer2
                                 .org	OC1Aaddr
00000c 940c 0584                 jmp		Timer1
                                 .org	URXCaddr
000016 940c 05db                 jmp		UART_RX
                                 .org	UTXCaddr
00001a 940c 05c7                 jmp		UART_TX
                                 .org	TWIaddr
000022 940c 0069                 jmp		TWI_int
                                 
                                 
                                 reset:
                                 //  
000024 e50f                      ldi		templ,LOW(RAMEND)
000025 e014                      ldi		temph,HIGH(RAMEND)
000026 bf0d                      out		SPL,templ
000027 bf1e                      out		SPH,temph
                                 //  2
000028 e70e                      ldi		templ,(1<<COM21) | (1<<COM20) | (1<<WGM21) | (1<<WGM20) | PRESCALER_2_CLK
000029 bd05                      out		TCCR2,templ
00002a e003                      ldi		templ,3
00002b bd03                      out		OCR2,templ
00002c e400                      ldi		templ,(1<<TOIE2)
00002d bf09                      out		TIMSK,templ
                                 // TWI
00002e e408                      ldi		templ,TWI_BAUD
00002f b900                      out		TWBR,templ
000030 2700                      clr		templ
000031 b901                      out		TWSR,templ
                                 // UART
000032 e908                      ldi		templ,(1<<RXCIE) | (1<<RXEN) | (1<<TXEN)// | (1<<TXCIE)
000033 b90a                      out		UCSRB,templ
000034 e806                      ldi		templ,(1<<URSEL) | (1<<UCSZ1) | (1<<UCSZ0)
000035 bd00                      out		UCSRC,templ
000036 e90f                      ldi		templ,LOW(USART_REG)
000037 e011                      ldi		temph,HIGH(USART_REG)
000038 bd10                      out		UBRRH,temph
000039 b909                      out		UBRRL,templ
                                  // ,  - 128,  - 
00003a e600                       ldi	templ,(1<<REFS0) | (1<<ADLAR)
00003b b907                       out	ADMUX,templ
00003c e807                       ldi	templ,(1<<ADEN) | (1<<ADPS2) | (1<<ADPS1) | (1<<ADPS0)
00003d b906                       out	ADCSRA,templ
                                 //  
00003e 9ab8                      sbi		DDRB,0
00003f 9ac0                      sbi		PORTB,0
000040 9abb                      sbi		DDRB,3
000041 9a92                      sbi		PORTD,BUTTON
000042 9a93                      sbi		PORTD,ENC_PLUS
000043 9a94                      sbi		PORTD,ENC_MINUS
000044 9a8f                      sbi		DDRD,7
                                 //sbi		PORTD,7
000045 ef0c                      ldi		templ,0xFC
000046 bb04                      out		DDR_ANODE,templ
000047 e30e                      ldi		templ,(1<<OE) | (1<<CLK) | (1<<LE) | (1<<SDI_TIME) | (1<<SDI_DATA)
000048 bb0a                      out		DDR_CATHODE,templ
                                 //  
000049 9478                      sei
00004a 24ee                      clr		set_segm
00004b 2744                      clr		state_flag
00004c 2788                      clr		t_count
00004d 2400                      clr		seconds
00004e 2411                      clr		minutes
00004f 2422                      clr		round
000050 9423                      inc		round
000051 e000                      ldi		templ,0
000052 2e30                      mov		sec_work,templ
000053 2e60                      mov		sec_rest,templ
000054 e002                      ldi		templ,2
000055 2e40                      mov		min_work,templ
000056 e001                      ldi		templ,1
000057 2e70                      mov		min_rest,templ
000058 e00c                      ldi		templ,12
000059 2e50                      mov		round_work,templ
00005a 2700                      clr		templ
00005b ebaa                      ldi		XL,LOW(RX_HEAD)							; 
00005c e0b0                      ldi		XH,HIGH(RX_HEAD)
00005d 930c                      st		X,templ	
00005e ebcb                      ldi		YL,LOW(RX_TAIL)							; 
00005f e0d0                      ldi		YH,HIGH(RX_TAIL)
000060 8308                      st		Y,templ
                                 
000061 940c 06b3                 jmp		program_begin
                                 
                                 .include	"TWI_functions.asm"
                                 
                                      TWI
                                 */
                                 
                                  .equ	DS1307_ADDRESS		=	104
                                  .equ	write				=	0
                                  .equ	read				=	1
                                  .equ	TWSR_MASK			=	0xFC
                                  .equ	TWI_NEED_ANSW		=	(1<<TWEA)
                                  .equ	TWI_NO_NEED_ANSW	=	(0<<TWEA)
                                 //                        
                                  .equ	TWI_START			=	0x08  // START has been transmitted  
                                  .equ	TWI_REP_START		=	0x10  // Repeated START has been transmitted
                                  .equ	TWI_ARB_LOST		=	0x38  // Arbitration lost
                                 
                                 //                         
                                  .equ	TWI_MTX_ADR_ACK     =	0x18  // SLA+W has been tramsmitted and ACK received
                                  .equ	TWI_MTX_ADR_NACK    =	0x20  // SLA+W has been tramsmitted and NACK received 
                                  .equ	TWI_MTX_DATA_ACK    =	0x28  // Data byte has been tramsmitted and ACK received
                                  .equ	TWI_MTX_DATA_NACK   =	0x30  // Data byte has been tramsmitted and NACK received 
                                 
                                 //     
                                  .equ	TWI_MRX_ADR_ACK     =	0x40  // SLA+R has been tramsmitted and ACK received
                                  .equ	TWI_MRX_ADR_NACK    =	0x48  // SLA+R has been tramsmitted and NACK received
                                  .equ	TWI_MRX_DATA_ACK    =	0x50  // Data byte has been received and ACK tramsmitted
                                  .equ	TWI_MRX_DATA_NACK   =	0x58  // Data byte has been received and NACK tramsmitted
                                 
                                 
                                  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                  
                                  //     
                                  Start:
                                  ;   	
000063 b706                      	in		templ,TWCR
000064 fd01                      	sbrc	templ,(1<<TWIE)
000065 cffd                      	rjmp	Start
                                  ;    
000066 ea05                      	ldi		templ,(1<<TWEN)|(1<<TWIE)|(1<<TWINT)|(1<<TWSTA)
000067 bf06                      	out		TWCR,templ
000068 9508                       ret
                                  
                                  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                  //  TWI   
                                  TWI_int:
000069 930f                      	push	templ
00006a 931f                      	push	temph	
                                  ;     
00006b b151                      	in		status,TWSR
00006c 7f5c                      	andi	status,TWSR_MASK
                                  ;    ,  ,  
                                  ;          .    
00006d 3058                      	cpi		status,TWI_START
00006e f031                      	breq	tranceive
00006f 3150                      	cpi		status,TWI_REP_START
000070 f021                      	breq	tranceive
000071 3158                      	cpi		status,TWI_MTX_ADR_ACK
000072 f011                      	breq	tranceive
000073 3258                      	cpi		status,TWI_MTX_DATA_ACK
000074 f419                      	brne	status_check_1
                                  tranceive:
000075 940e 0092                 	call	Send_byte	
000077 c017                      	rjmp	exit_twi_int 
                                  ;             
                                  ;        ,   
                                  ;       
                                  status_check_1:
000078 3550                      	cpi		status,TWI_MRX_DATA_ACK
000079 f419                      	brne	receive
00007a 940e 00a3                 	call	Read_byte
00007c c012                      	rjmp	exit_twi_int
                                  receive:
00007d 3450                      	cpi		status,TWI_MRX_ADR_ACK
00007e f421                      	brne	status_check_2
00007f 94fa                      	dec		byte_address
000080 ec05                      	ldi		templ,(1<<TWEN)|(1<<TWIE)|(1<<TWINT)|(1<<TWEA)
000081 bf06                      	out		TWCR,templ
000082 c00c                      	rjmp	exit_twi_int 
                                  status_check_2:
                                  ;     -     
000083 3558                      	cpi		status,TWI_MRX_DATA_NACK
000084 f419                      	brne	status_check_3
000085 940e 00a3                 	call	Read_byte
000087 c007                      	rjmp	exit_twi_int 
                                  status_check_3:
                                  ;     
                                  ; 
000088 3358                      	cpi		status,TWI_ARB_LOST
000089 f419                      	brne	status_check_4
00008a ea05                      	ldi		templ,(1<<TWEN)|(1<<TWIE)|(1<<TWINT)|(1<<TWSTA)
00008b bf06                      	out		TWCR,templ
00008c c002                      	rjmp	exit_twi_int
                                  status_check_4:	
                                  ;   SLA+W    
                                  ;   SLA+R        
                                  ;       
                                  ;   -     
00008d e004                      	ldi		templ,(1<<TWEN)|(0<<TWIE)|(0<<TWINT)|(0<<TWEA)|(0<<TWSTA)|(0<<TWSTO)|(0<<TWWC)	; 
00008e bf06                      	out		TWCR,templ
                                  exit_twi_int:	
00008f 911f                      	pop		temph
000090 910f                      	pop		templ
000091 9518                       reti
                                  
                                  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                  //           byte_address
                                  Send_byte:
000092 2366                      	tst		twi_packet_size					;    
000093 f061                      	breq	last_byte
000094 e6c0                      	ldi		YL,LOW(TWI_BUFFER_OUT)			;   ,   -   byte_address
000095 e0d0                      	ldi		YH,HIGH(TWI_BUFFER_OUT)
000096 2700                      	clr		templ
000097 0dcf                      	add		YL,byte_address
000098 1fd0                      	adc		YH,templ
000099 8108                      	ld		templ,Y
00009a b903                      	out		TWDR,templ										;      TWI
00009b e805                      	ldi		templ,(1<<TWEN)|(1<<TWIE)|(1<<TWINT)			; 
00009c bf06                      	out		TWCR,templ
00009d 94f3                      	inc		byte_address									;    . 
00009e 956a                      	dec		twi_packet_size							
00009f c002                      	rjmp	exit_send
                                  //    -  
                                  last_byte:
0000a0 e904                      	ldi		templ,(1<<TWEN)|(1<<TWINT)|(1<<TWSTO)|(0<<TWIE)
0000a1 bf06                      	out		TWCR,templ
                                  exit_send:
0000a2 9508                       ret
                                  
                                  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                  //              ,
                                  //    byte_address 
                                  Read_byte:
0000a3 2366                      	tst		twi_packet_size
0000a4 f421                      	brne	not_last_byte_in
0000a5 b113                      	in		temph,TWDR
0000a6 e904                      	ldi		templ,(1<<TWEN)|(1<<TWINT)|(1<<TWSTO)|(0<<TWIE)
0000a7 bf06                      	out		TWCR,templ
0000a8 c009                      	rjmp	exit_read
                                  not_last_byte_in:
0000a9 3061                      	cpi		twi_packet_size,1
0000aa f421                      	brne	not_pre_last_byte_in
0000ab b113                      	in		temph,TWDR
0000ac e805                      	ldi		templ,(1<<TWEN)|(1<<TWIE)|(1<<TWINT)|(0<<TWEA)
0000ad bf06                      	out		TWCR,templ
0000ae c003                      	rjmp	exit_read
                                  not_pre_last_byte_in:
0000af b113                      	in		temph,TWDR
0000b0 ec05                      	ldi		templ,(1<<TWEN)|(1<<TWIE)|(1<<TWINT)|(1<<TWEA)
0000b1 bf06                      	out		TWCR,templ	
                                  exit_read:
0000b2 e7c0                      	ldi		YL,LOW(TWI_BUFFER_IN)			;   ,    -   byte_address
0000b3 e0d0                      	ldi		YH,HIGH(TWI_BUFFER_IN)
0000b4 2700                      	clr		templ
0000b5 0dcf                      	add		YL,byte_address
0000b6 1fd0                      	adc		YH,templ
0000b7 8318                      	st		Y,temph	
0000b8 956a                      	dec		twi_packet_size
0000b9 94f3                      	inc		byte_address
0000ba 9508                       ret
                                  
                                  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                  //           .
                                  //    ,    - 7.
                                  //      ,   TWI_BUFFER_IN
                                  //     -   0,
                                  //    2  -  -  0 
                                 
                                  Read_packet:
0000bb 2700                      	clr		templ
0000bc bb05                      	out		PORT_ANODE,templ
                                 	//   0
0000bd e062                      	ldi		twi_packet_size,2						
0000be 24ff                      	clr		byte_address
0000bf e6c0                      	ldi		YL,LOW(TWI_BUFFER_OUT)					;          0
0000c0 e0d0                      	ldi		YH,HIGH(TWI_BUFFER_OUT)	
0000c1 ed00                      	ldi		templ,(DS1307_ADDRESS<<1)|write			; (  )						
0000c2 9309                      	st		Y+,templ
0000c3 2700                      	clr		templ						
0000c4 8308                      	st		Y,templ
0000c5 940e 0063                 	call	Start
0000c7 940e 00d4                 	call	Wait_TWI_finish
                                 	// 
0000c9 e068                      	ldi		twi_packet_size,8						;7     1   
0000ca 24ff                      	clr		byte_address							;    
0000cb ed01                      	ldi		templ,(DS1307_ADDRESS<<1)|read			; (  )
0000cc e6c0                      	ldi		YL,LOW(TWI_BUFFER_OUT)					;        
0000cd e0d0                      	ldi		YH,HIGH(TWI_BUFFER_OUT)
0000ce 8308                      	st		Y,templ
0000cf 940e 0063                 	call	Start
0000d1 940e 00d4                 	call	Wait_TWI_finish
0000d3 9508                       ret
                                 
                                  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                  //   TWI
                                  Wait_TWI_finish:
0000d4 b706                      	in		templ,TWCR
0000d5 fd00                      	sbrc	templ,TWIE
0000d6 cffd                      	rjmp	Wait_TWI_finish
0000d7 9508                       ret
                                 
                                  .dseg
                                 
000060                            TWI_BUFFER_OUT:	.byte	16
                                 
000070                            TWI_BUFFER_IN:		.byte	16
                                 
                                  .cseg
                                 .include	"MainFunctions.asm"
                                 
                                      .
                                 1.      .       ,    , 
                                                TWI_BUFFER_IN.       
                                  ,             TEMP_OUTPUT_BUFFER,      
                                 OUTPUT_BUFFER   (            ). 
                                 2.             ,    Z.      
                                  TEMP_OUTPUT_BUFFER +   +    .
                                 3.        .
                                 4.      .       ,     1 ,  
                                    ( ., ., , ,   ..)    .        
                                 ,      TIMER_BUFFER,    OUTPUT_BUFFER.
                                 5.     .    ,        /   
                                 .   ,    ,        .
                                 6.          .     OUTPUT_BUFFER   . 
                                 7.   .
                                 8.    1000 .
                                 9.    400 .
                                 10.     -,      byte_address,     temph.
                                 11.     temph   BCD   HEX.
                                 12.     temph   HEX   BCD.
                                 13.    .
                                 14.     .
                                 */
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	1
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Clock_mode_proc:
                                 
0000d8 ff44                      	sbrs	state_flag,RPTF							;        -    
0000d9 940c 0142                 	jmp		exit_clock_mode_proc
                                 
                                 	//           
0000db ff42                      	sbrs	state_flag,(1<<WWSM)
0000dc 940c 00ea                 	jmp		do_not_clear_set_mode_counter
0000de eba9                      	ldi		XL,LOW(SET_MODE_COUNTER)				
0000df e0b0                      	ldi		XH,HIGH(SET_MODE_COUNTER)
0000e0 910c                      	ld		templ,X
0000e1 9503                      	inc		templ
0000e2 3f0a                      	cpi		templ,250
0000e3 f018                      	brlo	write_set_mode_counter
0000e4 7f4d                      	cbr		state_flag,(1<<WWSM)
0000e5 9ac0                      	sbi		PORTB,0
0000e6 2700                      	clr		templ
                                 write_set_mode_counter:
0000e7 eba9                      	ldi		XL,LOW(SET_MODE_COUNTER)				
0000e8 e0b0                      	ldi		XH,HIGH(SET_MODE_COUNTER)
0000e9 930c                      	st		X,templ
                                 do_not_clear_set_mode_counter:
                                 
                                 ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
0000ea 7e4f                      	cbr		state_flag,(1<<RPTF)
0000eb 940e 00bb                 	call	Read_packet								;   DS1307,     TWI_BUFFER_IN
0000ed 940e 067d                 	call	Correct_time
                                 
0000ef 2777                      	clr		count									;  
                                 
                                 next_ds1307_byte:
                                 	
0000f0 2700                      	clr		templ									;     TWI_BUFFER_IN + count
0000f1 e7a0                      	ldi		XL,LOW(TWI_BUFFER_IN)
0000f2 e0b0                      	ldi		XH,HIGH(TWI_BUFFER_IN)
0000f3 0fa7                      	add		XL,count
0000f4 1fb0                      	adc		XH,templ
0000f5 910c                      	ld		templ,X
                                 	
0000f6 2f10                      	mov		temph,templ								;   -    
0000f7 700f                      	andi	templ,0xF								;   ,  -  
0000f8 7f10                      	andi	temph,0xF0
0000f9 9512                      	swap	temph
                                 
0000fa 3073                      	cpi		count,3									;  count -  ,    
0000fb f424                      	brge	data_bytes_format
0000fc eae2                      	ldi		ZL,LOW(2*TIME_DIGIT_CATHODE)			;   (. - 0, . - 1,  - 2) -    
0000fd e0f5                      	ldi		ZH,HIGH(2*TIME_DIGIT_CATHODE)
0000fe 940c 010b                 	jmp		set_XY_reg
                                 data_bytes_format:
000100 3073                      	cpi		count,3
000101 f021                      	breq	data_letter_format
000102 ede8                      	ldi		ZL,LOW(2*DATA_DIGIT_CATHODE)			;4-  5-  -    ( - 4,  - 5)
000103 e0f5                      	ldi		ZH,HIGH(2*DATA_DIGIT_CATHODE)
000104 940c 010b                 	jmp		set_XY_reg
                                 data_letter_format:
000106 0f00                      	lsl		templ									;       templ  temph  
000107 2f10                      	mov		temph,templ								;templ   2, temph  1  templ	
000108 9513                      	inc		temph
000109 ebe8                      	ldi		ZL,LOW(2*DATA_LETTER_CATHODE)			;3- -     (4)
00010a e0f5                      	ldi		ZH,HIGH(2*DATA_LETTER_CATHODE)
                                 set_XY_reg:
00010b 2fae                      	mov		XL,ZL									;     
00010c 2fbf                      	mov		XH,ZH
00010d 2722                      	clr		temp_2
00010e 2f37                      	mov		temp_3,count
00010f 0f33                      	lsl		temp_3									; count  4 
000110 0f33                      	lsl		temp_3
000111 e8c0                      	ldi		YL,LOW(TEMP_OUTPUT_BUFFER)				;       
000112 e0d0                      	ldi		YH,HIGH(TEMP_OUTPUT_BUFFER)
000113 0fc3                      	add		YL,temp_3								;       -     4 + TEMP_OUTPUT_BUFFER
000114 1fd2                      	adc		YH,temp_2
                                 								
000115 0f00                      	lsl		templ									;         templ
000116 0fe0                      	add		ZL,templ								
000117 1ff2                      	adc		ZH,temp_2
000118 940e 0143                 	call	Get_output	
                                 
00011a 2fea                      	mov		ZL,XL
00011b 2ffb                      	mov		ZH,XH
00011c 2722                      	clr		temp_2
00011d 0f11                      	lsl		temph
00011e 0fe1                      	add		ZL,temph								;         temph
00011f 1ff2                      	adc		ZH,temp_2
000120 940e 0143                 	call	Get_output
                                 
000122 9573                      	inc		count									;       6  
000123 3076                      	cpi		count,6
000124 f414                      	brge	copy_output_buffers
000125 940c 00f0                 	jmp		next_ds1307_byte
                                 
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 copy_output_buffers:
000127 e8a0                      	ldi		XL,LOW(TEMP_OUTPUT_BUFFER)				;          
000128 e0b0                      	ldi		XH,HIGH(TEMP_OUTPUT_BUFFER)
000129 e9c8                      	ldi		YL,LOW(OUTPUT_BUFFER)
00012a e0d0                      	ldi		YH,HIGH(OUTPUT_BUFFER)
00012b 94f8                      	cli
00012c 2777                      	clr		count
                                 start_copy_bytes:	
00012d 940e 016b                 	call	Copy_output_bytes
00012f 3170                      	cpi		count,16
000130 f3e0                      	brlo	start_copy_bytes						;        
                                 
000131 2700                      	clr		templ
000132 e014                      	ldi		temph,4
000133 0fc1                      	add		YL,temph
000134 1fd0                      	adc		YH,templ
                                 next_data_byte:
000135 940e 016b                 	call	Copy_output_bytes
000137 3174                      	cpi		count,20
000138 f3e0                      	brlo	next_data_byte
                                 
000139 2700                      	clr		templ
00013a e018                      	ldi		temph,8
00013b 1bc1                      	sub		YL,temph
00013c 0bd0                      	sbc		YH,templ
                                 next_month_byte:
00013d 940e 016b                 	call	Copy_output_bytes
00013f 3178                      	cpi		count,24
000140 f3e0                      	brlo	next_month_byte
                                 
000141 9478                      	sei
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 /*	clr		count
                                 	ldi		templ,0xFF
                                 	call	Send_UART*/
                                 
                                 exit_clock_mode_proc:
000142 9508                      ret
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	2
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 
                                 
                                 Get_output:	
000143 ff43                      	sbrs	state_flag,SDBL							;       SDBL (0 -  , 1 - )
000144 940c 014c                 	jmp		check_set_mode
                                 	
000146 3072                      	cpi		count,2									;      (count=2)    (count=4)  ,     (temp_2=temp_3=0)
000147 f011                      	breq	check_second_digit
000148 3074                      	cpi		count,4
000149 f411                      	brne	check_set_mode	
                                 check_second_digit:
00014a 3010                      	cpi		temph,0
00014b f041                      	breq	clr_output_bytes
                                 
                                 check_set_mode:
00014c ff41                      	sbrs	state_flag,WWSM							;    
00014d 940c 0158                 	jmp		read_programm_memory
00014f 157e                      	cp		count,set_segm
000150 f439                      	brne	read_programm_memory					;  ,           
000151 ff42                      	sbrs	state_flag,WWFF
000152 940c 0158                 	jmp		read_programm_memory					;   -  WWFF=1,     ,  
                                 clr_output_bytes:
000154 2722                      	clr		temp_2
000155 2733                      	clr		temp_3
000156 940c 0161                 	jmp		write_to_output_buffer
                                 
                                 read_programm_memory:								;   
000158 9124                      	lpm		temp_2,Z
000159 9631                      	adiw	ZL,1
00015a 9134                      	lpm		temp_3,Z
                                 
00015b 3074                      	cpi		count,4									;         
00015c f421                      	brne	write_to_output_buffer
00015d fd43                      	sbrc	state_flag,SDBL							
00015e 940c 0161                 	jmp		write_to_output_buffer
000160 6820                      	ori		temp_2,0x80
                                 
                                 write_to_output_buffer:								;   
                                 
000161 9329                      	st		Y+,temp_2
000162 9339                      	st		Y+,temp_3
                                 
000163 fd43                      	sbrc	state_flag,SDBL							;  SDBL
000164 940c 0169                 	jmp		clear_sdbl_flag
000166 6048                      	sbr		state_flag,(1<<SDBL)
000167 940c 016a                 	jmp		exit_get_output_proc
                                 clear_sdbl_flag:
000169 7f47                      	cbr		state_flag,(1<<SDBL)
                                 	
                                 exit_get_output_proc:
00016a 9508                      ret
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	3
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 
                                 Copy_output_bytes:
00016b 910d                      	ld		templ,X+
00016c 9309                      	st		Y+,templ
00016d 9573                      	inc		count
00016e 9508                      ret
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	4
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Timer_mode_proc:
00016f ff44                      	sbrs	state_flag,RPTF							;       -       
000170 940c 0142                 	jmp		exit_clock_mode_proc
000172 7e4f                      	cbr		state_flag,(1<<RPTF)
                                 
000173 940e 0178                 	call	Update_BT_counter						;   
000175 940e 021b                 	call	Get_output_timer_mode					;      
000177 9508                      ret
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	5
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Update_BT_counter:
000178 ff45                      	sbrs	state_flag,BTON							;   (/,  /)				
000179 940c 01da                 	jmp		timer_is_off
00017b fd47                      	sbrc	state_flag,BTPS
00017c 940c 01ed                 	jmp		timer_pause
                                 	
                                 ////////////////////////////////////////////////
00017e 9403                      	inc		seconds									;  
                                 
00017f 2711                      	clr		temph									;       
000180 e004                      	ldi		templ,4
000181 1611                      	cp		minutes,temph
000182 f431                      	brne	check_next_minute
000183 1600                      	cp		seconds,templ
000184 f421                      	brne	check_next_minute
000185 940e 0274                 	call	Sound_OFF								;      -  
000187 940c 018e                 	jmp		check_rest_work_1
                                 
                                 check_next_minute:									;    
000189 e30c                      	ldi		templ,60
00018a 1600                      	cp		seconds,templ
00018b f411                      	brne	check_rest_work_1						;    60 -       
00018c 2400                      	clr		seconds
00018d 9413                      	inc		minutes
                                 
                                 check_rest_work_1:									;   
00018e fd46                      	sbrc	state_flag,BTRT
00018f 940c 01a6                 	jmp		rest_time_1		
                                 	
000191 1414                      	cp		minutes,min_work						;    
000192 f479                      	brne	fill_buffer_var_1_temp
000193 1403                      	cp		seconds,sec_work
000194 f469                      	brne	fill_buffer_var_1_temp
000195 940e 0278                 	call	Sound_1000Hz_ON							;       ,         
000197 2400                      	clr		seconds
000198 2411                      	clr		minutes
000199 6440                      	sbr		state_flag,(1<<BTRT)
00019a 1425                      	cp		round,round_work
00019b f441                      	brne	fill_buffer_var_2_temp
00019c 7d4f                      	cbr		state_flag,(1<<BTON)					;   -  
00019d 2422                      	clr		round
00019e 9423                      	inc		round
00019f 6840                      	sbr		state_flag,(1<<BTPS)
0001a0 940c 0208                 	jmp		fill_buffer_var_3
                                 
                                 fill_buffer_var_1_temp:
0001a2 940c 01f4                 	jmp		fill_buffer_var_1
                                 fill_buffer_var_2_temp:
0001a4 940c 01fe                 	jmp		fill_buffer_var_2
                                 
                                 
                                 rest_time_1:										;      
0001a6 1417                      	cp		minutes,min_rest						;       1000(3       ) 
0001a7 f451                      	brne	rest_seconds_set_zero					; 400 ( 6,4  2 .     1 .) 
0001a8 1406                      	cp		seconds,sec_rest
0001a9 f4c9                      	brne	check_400Hz_on	
0001aa 940e 0278                 	call	Sound_1000Hz_ON
0001ac 2411                      	clr		minutes
0001ad 2400                      	clr		seconds
0001ae 7b4f                      	cbr		state_flag,(1<<BTRT)
0001af 9423                      	inc		round
0001b0 940c 01f4                 	jmp		fill_buffer_var_1
                                 
                                 rest_seconds_set_zero:								;   ,       
0001b2 2066                      	tst		sec_rest
0001b3 f479                      	brne	check_400Hz_on
0001b4 2d07                      	mov		templ,min_rest
0001b5 950a                      	dec		templ
0001b6 1610                      	cp		minutes,templ
0001b7 f4b9                      	brne	set_sound_off
0001b8 e306                      	ldi		templ,54
0001b9 1600                      	cp		seconds,templ
0001ba f0d9                      	breq	set_sound_400Hz_on
0001bb e308                      	ldi		templ,56
0001bc 1600                      	cp		seconds,templ
0001bd f0c1                      	breq	set_sound_400Hz_on
0001be e30a                      	ldi		templ,58
0001bf 1600                      	cp		seconds,templ
0001c0 f0a9                      	breq	set_sound_400Hz_on
0001c1 940c 01cf                 	jmp		set_sound_off
                                 
                                 check_400Hz_on:											;   ,        
0001c3 2d06                      	mov		templ,sec_rest
0001c4 5002                      	subi	templ,2
0001c5 1600                      	cp		seconds,templ
0001c6 f079                      	breq	set_sound_400Hz_on
0001c7 5002                      	subi	templ,2
0001c8 1600                      	cp		seconds,templ
0001c9 f061                      	breq	set_sound_400Hz_on
0001ca 5002                      	subi	templ,2
0001cb 1600                      	cp		seconds,templ
0001cc f049                      	breq	set_sound_400Hz_on
0001cd 940c 01cf                 	jmp		set_sound_off	
                                 	
                                 set_sound_off:
0001cf e004                      	ldi		templ,4
0001d0 1600                      	cp		seconds,templ
0001d1 f160                      	brlo	fill_buffer_var_2
0001d2 940e 0274                 	call	Sound_OFF
0001d4 940c 01fe                 	jmp		fill_buffer_var_2
                                 
                                 set_sound_400Hz_on:
0001d6 940e 027e                 	call	Sound_400Hz_ON
0001d8 940c 01fe                 	jmp		fill_buffer_var_2
                                 
                                 
                                 
                                 ////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 timer_is_off:
0001da fd46                      	sbrc	state_flag,BTRT
0001db 940c 01e1                 	jmp		timer_just_stopped	
0001dd 940e 0274                 	call	Sound_OFF
0001df 940c 01e8                 	jmp		check_timer_set_mode
                                 
                                 timer_just_stopped:
0001e1 ff47                      	sbrs	state_flag,BTPS
0001e2 940c 01e7                 	jmp		set_btrt_to_zero
0001e4 774f                      	cbr		state_flag,(1<<BTPS)
0001e5 940c 01e8                 	jmp		check_timer_set_mode
                                 set_btrt_to_zero:
0001e7 7b4f                      	cbr		state_flag,(1<<BTRT)
                                 check_timer_set_mode:
0001e8 ff41                      	sbrs	state_flag,WWSM
0001e9 940c 0208                 	jmp		fill_buffer_var_3	
0001eb 940c 0212                 	jmp		fill_buffer_var_4
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 timer_pause:
0001ed 940e 0274                 	call	Sound_OFF
0001ef ff46                      	sbrs	state_flag,BTRT
0001f0 940c 01f4                 	jmp		fill_buffer_var_1
0001f2 940c 01fe                 	jmp		fill_buffer_var_2
                                 
                                 	
                                 fill_buffer_var_1:									;      (   )			
0001f4 eba0                      	ldi		XL,LOW(TIMER_BUFFER)
0001f5 e0b0                      	ldi		XH,HIGH(TIMER_BUFFER)
0001f6 920d                      	st		X+,seconds
0001f7 921d                      	st		X+,minutes
0001f8 922d                      	st		X+,round
0001f9 925d                      	st		X+,round_work
0001fa 923d                      	st		X+,sec_work
0001fb 924c                      	st		X,min_work
0001fc 940c 021a                 	jmp		exit_bt_counter_procedure
                                 
                                 fill_buffer_var_2:
0001fe eba0                      	ldi		XL,LOW(TIMER_BUFFER)
0001ff e0b0                      	ldi		XH,HIGH(TIMER_BUFFER)
000200 920d                      	st		X+,seconds
000201 921d                      	st		X+,minutes
000202 922d                      	st		X+,round
000203 925d                      	st		X+,round_work
000204 926d                      	st		X+,sec_rest
000205 927c                      	st		X,min_rest
000206 940c 021a                 	jmp		exit_bt_counter_procedure
                                 
                                 fill_buffer_var_3:
000208 eba0                      	ldi		XL,LOW(TIMER_BUFFER)
000209 e0b0                      	ldi		XH,HIGH(TIMER_BUFFER)
00020a 920d                      	st		X+,seconds
00020b 921d                      	st		X+,minutes
00020c 922d                      	st		X+,round
00020d 925d                      	st		X+,round_work
00020e 923d                      	st		X+,sec_work
00020f 924c                      	st		X,min_work
000210 940c 021a                 	jmp		exit_bt_counter_procedure
                                 
                                 fill_buffer_var_4:
000212 eba0                      	ldi		XL,LOW(TIMER_BUFFER)
000213 e0b0                      	ldi		XH,HIGH(TIMER_BUFFER)
000214 923d                      	st		X+,sec_work
000215 924d                      	st		X+,min_work
000216 925d                      	st		X+,round_work
000217 925d                      	st		X+,round_work
000218 926d                      	st		X+,sec_rest
000219 927c                      	st		X,min_rest
                                 
                                 exit_bt_counter_procedure:	
00021a 9508                      ret
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	6
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Get_output_timer_mode:
00021b 2777                      	clr		count
                                 
                                 next_timer_digit_code:
00021c 2711                      	clr		temph											;  templ      TIMER_BUFFER + count
00021d eba0                      	ldi		XL,LOW(TIMER_BUFFER)
00021e e0b0                      	ldi		XH,HIGH(TIMER_BUFFER)
00021f 0fa7                      	add		XL,count
000220 1fb1                      	adc		XH,temph
000221 910c                      	ld		templ,X
                                 
                                 timer_subtract_ten:											; templ   ,   ,  temph -   
000222 300a                      	cpi		templ,10
000223 f020                      	brlo	timer_check_digit_count
000224 9513                      	inc		temph
000225 500a                      	subi	templ,10
000226 940c 0222                 	jmp		timer_subtract_ten
                                 
                                 timer_check_digit_count:									;  Z    ,     
000228 3073                      	cpi		count,3
000229 f420                      	brsh	timer_small_digit_address
00022a eae2                      	ldi		ZL,LOW(2*TIME_DIGIT_CATHODE)					;  
00022b e0f5                      	ldi		ZH,HIGH(2*TIME_DIGIT_CATHODE)
00022c 940c 0230                 	jmp		timer_copy_address
                                 
                                 timer_small_digit_address:
00022e ede8                      	ldi		ZL,LOW(2*DATA_DIGIT_CATHODE)					;  
00022f e0f5                      	ldi		ZH,HIGH(2*DATA_DIGIT_CATHODE)	
                                 
                                 timer_copy_address:											;              
000230 2fae                      	mov		XL,ZL
000231 2fbf                      	mov		XH,ZH
                                 	
000232 2733                      	clr		temp_3											;  Y ,        
000233 2f27                      	mov		temp_2,count									;    count ( )
000234 0f22                      	lsl		temp_2
000235 0f22                      	lsl		temp_2
000236 e9c8                      	ldi		YL,LOW(OUTPUT_BUFFER)
000237 e0d0                      	ldi		YH,HIGH(OUTPUT_BUFFER)
000238 0fc2                      	add		YL,temp_2
000239 1fd3                      	adc		YH,temp_3
                                 	
00023a 0f00                      	lsl		templ											;    
00023b 0fe0                      	add		ZL,templ
00023c 1ff3                      	adc		ZH,temp_3
                                 
                                 timer_get_ouput_data:
00023d ff43                      	sbrs	state_flag,SDBL									;          , ..    = 0 
00023e 940c 0246                 	jmp		timer_first_byte_load							;,      = 0,      
000240 3070                      	cpi		count,0											; -   ( 0  4)
000241 f021                      	breq	timer_first_byte_load
000242 3074                      	cpi		count,4
000243 f011                      	breq	timer_first_byte_load
000244 3010                      	cpi		temph,0
000245 f041                      	breq	timer_clear_output_bytes
                                 
                                 timer_first_byte_load:
000246 ff41                      	sbrs	state_flag,WWSM
000247 940c 0252                 	jmp		timer_load_output_bytes
000249 157e                      	cp		count,set_segm
00024a f439                      	brne	timer_load_output_bytes
00024b ff42                      	sbrs	state_flag,WWFF
00024c 940c 0252                 	jmp		timer_load_output_bytes
                                 
                                 timer_clear_output_bytes:
00024e 2722                      	clr		temp_2
00024f 2733                      	clr		temp_3
000250 940c 025f                 	jmp		put_regs_to_output_buffer
                                 
                                 timer_load_output_bytes:
000252 9125                      	lpm		temp_2,Z+
000253 9134                      	lpm		temp_3,Z
000254 3072                      	cpi		count,2											;     (2- )
000255 f419                      	brne	tm_get_output_set_point
000256 7f27                      	andi	temp_2,0xF7	
000257 940c 025f                 	jmp		put_regs_to_output_buffer
                                 	
                                 tm_get_output_set_point:
000259 3075                      	cpi		count,5									;         
00025a f421                      	brne	put_regs_to_output_buffer
00025b fd43                      	sbrc	state_flag,SDBL							
00025c 940c 025f                 	jmp		put_regs_to_output_buffer
00025e 6820                      	ori		temp_2,0x80					
                                 
                                 put_regs_to_output_buffer:									;       temph
00025f 9329                      	st		Y+,temp_2
000260 9339                      	st		Y+,temp_3
000261 fd43                      	sbrc	state_flag,SDBL									;        
000262 940c 026d                 	jmp		timer_clear_sdbl
000264 6048                      	sbr		state_flag,(1<<SDBL)							
000265 2fea                      	mov		ZL,XL
000266 2ffb                      	mov		ZH,XH
000267 0f11                      	lsl		temph
000268 2722                      	clr		temp_2
000269 0fe1                      	add		ZL,temph
00026a 1ff2                      	adc		ZH,temp_2
00026b 940c 023d                 	jmp		timer_get_ouput_data
                                 
                                 timer_clear_sdbl:
00026d 7f47                      	cbr		state_flag,(1<<SDBL)					;                6 
00026e 9573                      	inc		count
00026f 3076                      	cpi		count,6
000270 f410                      	brsh	exit_get_output_timer_mode
000271 940c 021c                 	jmp		next_timer_digit_code
                                 
                                 exit_get_output_timer_mode:
                                 /*	clr		count
                                 	ldi		templ,0xCC
                                 	call	Send_UART*/
000273 9508                      ret
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	7
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Sound_OFF:
000274 9ac0                      	sbi		PORTB,0
000275 2700                      	clr		templ
000276 bf03                      	out		TCCR0,templ
000277 9508                      ret
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	8
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Sound_1000Hz_ON:
000278 98c0                      	cbi		PORTB,0
000279 e10b                      	ldi		templ,(1<<CS00) | (1<<CS01) | (1<<WGM01) | (1<<COM00)
00027a bf03                      	out		TCCR0,templ
00027b e10e                      	ldi		templ,OCR0_1000Hz
00027c bf0c                      	out		OCR0,templ
00027d 9508                      ret
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	9
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Sound_400Hz_ON:
00027e 98c0                      	cbi		PORTB,0
00027f e10c                      	ldi		templ,(1<<CS02) | (1<<WGM01) | (1<<COM00)
000280 bf03                      	out		TCCR0,templ
000281 e40d                      	ldi		templ,OCR0_400Hz
000282 bf0c                      	out		OCR0,templ
000283 9508                      ret
                                  
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////							10
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Write_byte_to_DS1307:
000284 e063                      	ldi		twi_packet_size,3
000285 2700                      	clr		templ
000286 e6c0                      	ldi		YL,LOW(TWI_BUFFER_OUT)			
000287 e0d0                      	ldi		YH,HIGH(TWI_BUFFER_OUT)
000288 0dcf                      	add		YL,byte_address
000289 1fd0                      	adc		YH,templ
00028a ed00                      	ldi		templ,(DS1307_ADDRESS<<1)|write
00028b 9309                      	st		Y+,templ
00028c 2d0f                      	mov		templ,byte_address
00028d 9309                      	st		Y+,templ
00028e 2f01                      	mov		templ,temph
00028f 8308                      	st		Y,templ	
000290 940e 0063                 	call	Start
000292 940e 00d4                 	call	Wait_TWI_finish
000294 9508                      ret
                                  
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////							11
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 BCD_TO_HEX:
000295 2f01                      	mov		templ,temph
000296 701f                      	andi	temph,0xF
000297 7f00                      	andi	templ,0xF0
000298 9502                      	swap	templ										; temph - , templ - 							
                                 next_increment:
000299 2300                      	tst		templ
00029a f021                      	breq	exit_bcd_to_hex
00029b 5f16                      	subi	temph,-10
00029c 950a                      	dec		templ
00029d 940c 0299                 	jmp		next_increment
                                 exit_bcd_to_hex:	
00029f 9508                      ret
                                  
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////							12
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 HEX_TO_BCD:
0002a0 2700                      	clr		templ
0002a1 3614                      	cpi		temph,100									//     100,    
0002a2 f440                      	brsh	exit_change_format
                                 next_decrement:											//   10      ,  - temph,  - templ
0002a3 301a                      	cpi		temph,10									//  temph		
0002a4 f020                      	brlo	next_format_operation
0002a5 501a                      	subi	temph,10
0002a6 9503                      	inc		templ
0002a7 940c 02a3                 	jmp		next_decrement
                                 next_format_operation:	
0002a9 9502                      	swap	templ										// 4  temph    4  templ
0002aa 2b10                      	or		temph,templ
                                 exit_change_format:	
0002ab 9508                      ret
                                  
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////							13
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Set_default_time:
0002ac e6c0                      	 ldi	YL,LOW(TWI_BUFFER_OUT)			
0002ad e0d0                      	 ldi	YH,HIGH(TWI_BUFFER_OUT)
0002ae ed00                      	 ldi	templ,(DS1307_ADDRESS<<1)|write
0002af 9309                      	 st		Y+,templ
0002b0 e000                      	 ldi	templ,0
0002b1 9309                      	 st		Y+,templ	
0002b2 e000                      	 ldi	templ,0
0002b3 9309                      	 st		Y+,templ	
0002b4 e000                      	 ldi	templ,0
0002b5 9309                      	 st		Y+,templ
0002b6 e106                      	 ldi	templ,0x16
0002b7 9309                      	 st		Y+,templ
0002b8 e007                      	 ldi	templ,0x7
0002b9 9309                      	 st		Y+,templ	
0002ba e201                      	 ldi	templ,0x21
0002bb 9309                      	 st		Y+,templ	
0002bc e007                      	 ldi	templ,0x7
0002bd 9309                      	 st		Y+,templ
0002be e109                      	 ldi	templ,0x19
0002bf 8308                      	 st		Y,templ	
0002c0 e069                      	 ldi	twi_packet_size,9
0002c1 24ff                      	 clr	byte_address
0002c2 940e 0063                 	 call	Start
0002c4 940e 00d4                 	 call	Wait_TWI_finish
0002c6 9508                      ret
                                 
                                 Start_time:
0002c7 940e 00bb                 	call	Read_packet
0002c9 e7a0                      	ldi		XL,LOW(TWI_BUFFER_IN)
0002ca e0b0                      	ldi		XH,HIGH(TWI_BUFFER_IN)
0002cb 910c                      	ld		templ,X
0002cc 3800                      	cpi		templ,0x80
0002cd f411                      	brne	exit_start_time
0002ce 940e 02ac                 	call	Set_default_time
                                 exit_start_time:
0002d0 9508                      ret
                                 
                                 .dseg
                                 
000080                           TEMP_OUTPUT_BUFFER:		.byte	24
                                 
000098                           OUTPUT_BUFFER:			.byte	24
                                 
0000b0                           TIMER_BUFFER:			.byte	6
                                 
                                 .cseg
                                 
                                 TIME_DIGIT_CATHODE:
0002d1 0bff
0002d2 0b09
0002d3 0def
0002d4 0fcf
0002d5 0f1d
0002d6 07df
0002d7 07ff                      		.db		0xFF,	0x0B,	0x09,	0x0B,	0xEF,	0x0D,	0xCF,	0x0F,	0x1D,	0x0F,	0xDF,	0x07,	0xFF,	0x07
                                 //						0////			1////			2////			3////			4////			5////			6///
0002d8 0b0f
0002d9 0fff
0002da 0fdf
0002db 0000                      		.db		0x0F,	0x0B,	0xFF,	0x0F,	0xDF,	0x0F,	0x00,	0x00
                                 //						7////			8////			9////			NA////
                                 
                                 DATA_LETTER_CATHODE:
0002dc 0000
0002dd 0000
0002de 9031
0002df 4b03
0002e0 a020
0002e1 2f72                      		.db		0x00,	0x00,	0x00,	0x00,	0x31,	0x90,	0x03,	0x4B,	0x20,	0xA0,	0x72,	0x2F
                                 //						NL///			NL///			////			////			////			////			
0002e2 9031
0002e3 4351
0002e4 a020
0002e5 e420
0002e6 a020
0002e7 4b03
0002e8 9231
0002e9 4351
0002ea 8011
0002eb 2f72                      		.db		0x31,	0x90,	0x51,	0x43,	0x20,	0xA0,	0x20,	0xE4,	0x20,	0xA0,	0x03,	0x4B,	0x31,	0x92,	0x51,	0x43,	0x11,	0x80,	0x72,	0x2F
                                 //						///			///			////			////			////			////			////			////			///			///			
                                 
                                 DATA_DIGIT_CATHODE:
0002ec 4b53
0002ed 0802
0002ee ab51
0002ef ab52
0002f0 e802
0002f1 e352
0002f2 e353                      		.db		0x53,	0x4B,	0x02,	0x08,	0x51,	0xAB,	0x52,	0xAB,	0x02,	0xE8,	0x52,	0xE3,	0x53,	0xE3
                                 //						0////			1////			2////			3////			4////			5////			6///
0002f3 0b02
0002f4 eb53
0002f5 eb52
0002f6 0000                      		.db		0x02,	0x0B,	0x53,	0xEB,	0x52,	0xEB,	0x00,	0x00
                                 //						7////			8////			9////			NA////
                                 
                                 
                                 
                                 .include	"EncoderFunctions.asm"
                                 
                                       .
                                 1.     .   .    (    - 0)  
                                   8    ,      1 (    ).    ( 
                                   - 1)   8         .    0,   
                                    .    500 (    2 ),      , 
                                  .     500    ( 2 )  ,   .
                                           .     (.. 
                                      -     ),        .
                                                 
                                 enc_state (  ).
                                 2.     . 
                                 3.     . 
                                 4.       .
                                 */
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	1
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Encoder_proc:
0002f7 ff97                      	sbrs	enc_state,T2IF
0002f8 940c 0349                 	jmp		exit_enc_proc
                                 
0002fa 2f09                      	mov		templ,enc_state						; enc_state    ,        
0002fb 7093                      	andi	enc_state,3							; enc_state     ,  templ -    
0002fc 710c                      	andi	templ,0x1C							; temph -      
0002fd 9506                      	lsr		templ
0002fe 9506                      	lsr		templ
0002ff 2f10                      	mov		temph,templ
000300 9516                      	lsr		temph
000301 7001                      	andi	templ,1
                                 
000302 eba6                      	ldi		XL,LOW(BUTTON_STATE)				;           1 
000303 e0b0                      	ldi		XH,HIGH(BUTTON_STATE)
000304 912c                      	ld		temp_2,X
000305 0f22                      	lsl		temp_2
000306 2b02                      	or		templ,temp_2
000307 930c                      	st		X,templ
                                 
000308 ebc7                      	ldi		YL,LOW(BUTTON_COUNT)				;        
000309 e0d0                      	ldi		YH,HIGH(BUTTON_COUNT)
00030a 91a9                      	ld		XL,Y+
00030b 81b8                      	ld		XH,Y
                                 
00030c 3000                      	cpi		templ,0								;     1     8  (     = 0)
00030d f439                      	brne	check_button_state_unpress			;    8 ,    
00030e 9611                      	adiw	XL,1								;  ,           
00030f ebc7                      	ldi		YL,LOW(BUTTON_COUNT)				;   512(  2-    2)     -     	
000310 e0d0                      	ldi		YH,HIGH(BUTTON_COUNT)				;  512,     -     
000311 93a9                      	st		Y+,XL
000312 83b8                      	st		Y,XH
000313 940c 032b                 	jmp		check_encoder_state
                                 
                                 check_button_state_unpress:
000315 3f0f                      	cpi		templ,0xFF
000316 f4a1                      	brne	check_encoder_state
000317 30a0                      	cpi		XL,0
000318 f421                      	brne	check_non_zero_counter
000319 30b0                      	cpi		XH,0
00031a f411                      	brne	check_non_zero_counter
00031b 940c 032b                 	jmp		check_encoder_state
                                 
                                 check_non_zero_counter:
00031d 30b2                      	cpi		XH,2
00031e f424                      	brge	button_counter_more_than_512
00031f 940e 034a                 	call	Button_short_press
000321 940c 0325                 	jmp		clear_button_counter
                                 
                                 button_counter_more_than_512:	
000323 940e 0396                 	call	Button_long_press
                                 
                                 clear_button_counter:
000325 27aa                      	clr		XL
000326 27bb                      	clr		XH
000327 ebc7                      	ldi		YL,LOW(BUTTON_COUNT)				
000328 e0d0                      	ldi		YH,HIGH(BUTTON_COUNT)
000329 93a9                      	st		Y+,XL
00032a 83b8                      	st		Y,XH
                                 
                                 check_encoder_state:									;  ,        
00032b 3013                      	cpi		temph,3										;             
00032c f489                      	brne	enc_A_B_not_3								;     enc_state = 1  3     
00032d 3090                      	cpi		enc_state,0
00032e f0d1                      	breq	exit_enc_proc
                                 
00032f 3091                      	cpi		enc_state,1
000330 f429                      	brne	check_enc_state_3
000331 7b9f                      	cbr		enc_state,(1<<EMPF)
000332 940e 03c4                 	call	Change_parameter
000334 940c 033b                 	jmp		clear_logical_encoder_state
                                 
                                 check_enc_state_3:
000336 3093                      	cpi		enc_state,3
000337 f489                      	brne	exit_enc_proc
000338 6490                      	sbr		enc_state,(1<<EMPF)
000339 940e 03c4                 	call	Change_parameter
                                 
                                 
                                 clear_logical_encoder_state:
00033b 2799                      	clr		enc_state		
00033c 940c 0349                 	jmp		exit_enc_proc							
                                 
                                 enc_A_B_not_3:											;            
00033e 3011                      	cpi		temph,1
00033f f419                      	brne	enc_A_B_not_1
000340 e093                      	ldi		enc_state,3
000341 940c 0349                 	jmp		exit_enc_proc
                                 
                                 enc_A_B_not_1:
000343 3012                      	cpi		temph,2
000344 f419                      	brne	enc_A_B_not_2
000345 e091                      	ldi		enc_state,1
000346 940c 0349                 	jmp		exit_enc_proc
                                 
                                 enc_A_B_not_2:	
000348 e092                      	ldi		enc_state,2
                                 
                                 exit_enc_proc:
000349 9508                      ret
                                 
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	2
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Button_short_press:
                                 	//              SET_MODE_COUNTER
00034a 930f                      	push	templ
00034b 2700                      	clr		templ
00034c eba9                      	ldi		XL,LOW(SET_MODE_COUNTER)				
00034d e0b0                      	ldi		XH,HIGH(SET_MODE_COUNTER)
00034e 930c                      	st		X,templ
00034f 910f                      	pop		templ
                                 ///////////////////////////////////////////////////////////////////////////
000350 fd40                      	sbrc	state_flag,WWVM
000351 940c 036f                 	jmp		bsp_timer_mode
000353 ff41                      	sbrs	state_flag,WWSM
000354 940c 0395                 	jmp		exit_bsp_proc							;          
000356 e023                      	ldi		temp_2,3
000357 16e2                      	cp		set_segm,temp_2
000358 f418                      	brsh	bsp_clock_segment_4_5_0					;      ,   4  5
000359 94e3                      	inc		set_segm
00035a 940c 0395                 	jmp		exit_bsp_proc
                                 bsp_clock_segment_4_5_0:
00035c e025                      	ldi		temp_2,5
00035d 16e2                      	cp		set_segm,temp_2
00035e f421                      	brne	bsp_clock_segment_4_0
00035f e024                      	ldi		temp_2,4
000360 2ee2                      	mov		set_segm,temp_2
000361 940c 0395                 	jmp		exit_bsp_proc
                                 bsp_clock_segment_4_0:
000363 e024                      	ldi		temp_2,4
000364 16e2                      	cp		set_segm,temp_2
000365 f021                      	breq	bsp_clock_segment_4
000366 e025                      	ldi		temp_2,5
000367 2ee2                      	mov		set_segm,temp_2
000368 940c 0395                 	jmp		exit_bsp_proc
                                 bsp_clock_segment_4:
00036a 24ee                      	clr		set_segm
00036b 7f4d                      	cbr		state_flag,(1<<WWSM)
00036c 9ac0                      	sbi		PORTB,0												; 12 
00036d 940c 0395                 	jmp		exit_bsp_proc
                                 
                                 //////////////////////////////////////////////////////////////////////////
                                 bsp_timer_mode:
00036f ff41                      	sbrs	state_flag,WWSM
000370 940c 0380                 	jmp		bsp_timer_mode_check_bt_on				;          
000372 94e3                      	inc		set_segm
000373 e026                      	ldi		temp_2,6
000374 16e2                      	cp		set_segm,temp_2
000375 f430                      	brsh	bsp_timer_mode_clear_segm
000376 e023                      	ldi		temp_2,3
000377 16e2                      	cp		set_segm,temp_2
000378 f4e1                      	brne	exit_bsp_proc
000379 94e3                      	inc		set_segm
00037a 940c 0395                 	jmp		exit_bsp_proc
                                 
                                 bsp_timer_mode_clear_segm:
00037c 24ee                      	clr		set_segm
00037d 7f4d                      	cbr		state_flag,(1<<WWSM)
00037e 940c 0395                 	jmp		exit_bsp_proc
                                 
                                 bsp_timer_mode_check_bt_on:
000380 fd45                      	sbrc	state_flag,BTON
000381 940c 038e                 	jmp		bsp_chek_pause_on
000383 6240                      	sbr		state_flag,(1<<BTON)								; 	
000384 ff47                      	sbrs	state_flag,BTPS
000385 940e 0278                 	call	Sound_1000Hz_ON
000387 734f                      	cbr		state_flag,(1<<BTRT) | (1<<BTPS)
000388 2400                      	clr		seconds
000389 2411                      	clr		minutes
00038a 2422                      	clr		round
00038b 9423                      	inc		round
00038c 940c 0395                 	jmp		exit_bsp_proc
                                 
                                 bsp_chek_pause_on:
00038e ff47                      	sbrs	state_flag,BTPS										;      
00038f 940c 0394                 	jmp		bsp_pause_is_off
000391 774f                      	cbr		state_flag,(1<<BTPS)
000392 940c 0395                 	jmp		exit_bsp_proc
                                 
                                 bsp_pause_is_off:
000394 6840                      	sbr		state_flag,(1<<BTPS)
                                 
                                 exit_bsp_proc:
000395 9508                      ret
                                 
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	3
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Button_long_press:
                                 	//              SET_MODE_COUNTER
000396 930f                      	push	templ
000397 2700                      	clr		templ
000398 eba9                      	ldi		XL,LOW(SET_MODE_COUNTER)				
000399 e0b0                      	ldi		XH,HIGH(SET_MODE_COUNTER)
00039a 930c                      	st		X,templ
00039b 910f                      	pop		templ
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
00039c fd40                      	sbrc	state_flag,WWVM
00039d 940c 03ae                 	jmp		blp_timer_mode
00039f fd41                      	sbrc	state_flag,WWSM
0003a0 940c 03a7                 	jmp		blp_clock_mode_set
0003a2 6042                      	sbr		state_flag,(1<<WWSM)				;    
0003a3 24ee                      	clr		set_segm							
0003a4 98c0                      	cbi		PORTB,0								; 12 
0003a5 940c 03c3                 	jmp		exit_blp_proc
                                 	
                                 blp_clock_mode_set:								;    +  12 
0003a7 e70e                      	ldi		templ,(1<<COM21) | (1<<COM20) | (1<<WGM21) | (1<<WGM20) | PRESCALER_2_BT							;    2
0003a8 bd05                      	out		TCCR2,templ	
0003a9 6041                      	sbr		state_flag,(1<<WWVM)
0003aa 714d                      	cbr		state_flag,(1<<WWSM) | (1<<BTON) | (1<<BTRT) | (1<<BTPS) 
0003ab 9ac0                      	sbi		PORTB,0
0003ac 940c 03c3                 	jmp		exit_blp_proc
                                 
                                 blp_timer_mode:
0003ae ff41                      	sbrs	state_flag,WWSM
0003af 940c 03b6                 	jmp		blp_timer_not_set_mode	
0003b1 e70e                      	ldi		templ,(1<<COM21) | (1<<COM20) | (1<<WGM21) | (1<<WGM20) | PRESCALER_2_CLK							;    2
0003b2 bd05                      	out		TCCR2,templ			
0003b3 714c                      	cbr		state_flag,(1<<WWVM) | (1<<WWSM) | (1<<BTON) | (1<<BTRT) | (1<<BTPS) 								;     
0003b4 940c 03c3                 	jmp		exit_blp_proc
                                 
                                 blp_timer_not_set_mode:
0003b6 fd45                      	sbrc	state_flag,BTON
0003b7 940c 03be                 	jmp		blp_timer_is_on
0003b9 6042                      	sbr		state_flag,(1<<WWSM)											;     
0003ba 714f                      	cbr		state_flag,(1<<BTON) | (1<<BTRT) | (1<<BTPS)
0003bb 24ee                      	clr		set_segm
0003bc 940c 03c3                 	jmp		exit_blp_proc
                                 
                                 blp_timer_is_on:
0003be 714d                      	cbr		state_flag,(1<<WWSM) | (1<<BTON) | (1<<BTRT) | (1<<BTPS)		;    
0003bf 2400                      	clr		seconds
0003c0 2411                      	clr		minutes
0003c1 2422                      	clr		round
0003c2 9423                      	inc		round
                                 
                                 exit_blp_proc:
0003c3 9508                      ret
                                 
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	4
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Change_parameter:
                                 	//              SET_MODE_COUNTER
0003c4 930f                      	push	templ
0003c5 2700                      	clr		templ
0003c6 eba9                      	ldi		XL,LOW(SET_MODE_COUNTER)				
0003c7 e0b0                      	ldi		XH,HIGH(SET_MODE_COUNTER)
0003c8 930c                      	st		X,templ
0003c9 910f                      	pop		templ
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
0003ca fd40                      	sbrc	state_flag,WWVM		
0003cb 940c 04b4                 	jmp		cp_timer_mode
0003cd ff41                      	sbrs	state_flag,WWSM
0003ce 940c 0533                 	jmp		exit_cp_proc
                                 
0003d0 2700                      	clr		templ
0003d1 e7a0                      	ldi		XL,LOW(TWI_BUFFER_IN)
0003d2 e0b0                      	ldi		XH,HIGH(TWI_BUFFER_IN)
0003d3 0dae                      	add		XL,set_segm
0003d4 1fb0                      	adc		XH,templ
0003d5 911c                      	ld		temph,X
                                 
                                 ////////////////////////////////////////////////////////////////////
                                 ////////////////////////////////////////////////////////////////////     
0003d6 16e0                      	cp		set_segm,templ							
0003d7 f431                      	brne	cp_clock_mode_segm_1
0003d8 2711                      	clr		temph												; 		
0003d9 24ff                      	clr		byte_address
0003da 940e 0284                 	call	Write_byte_to_DS1307
0003dc 940c 0533                 	jmp		exit_cp_proc
                                 
                                 ////////////////////////////////////////////////////////////////////
                                 cp_clock_mode_segm_1:
0003de e001                      	ldi		templ,1												
0003df 16e0                      	cp		set_segm,templ										; 
0003e0 f4c9                      	brne	cp_clock_mode_segm_2
0003e1 940e 0295                 	call	BCD_TO_HEX
0003e3 fd96                      	sbrc	enc_state,EMPF
0003e4 940c 03ee                 	jmp		blp_segm_1_enc_plus
0003e6 3010                      	cpi		temph,0
0003e7 f419                      	brne	blp_segm_1_dec_min
0003e8 e31b                      	ldi		temph,59
0003e9 940c 03f2                 	jmp		blp_segm_1_write_byte
                                 
                                 blp_segm_1_dec_min:
0003eb 951a                      	dec		temph
0003ec 940c 03f2                 	jmp		blp_segm_1_write_byte
                                 
                                 blp_segm_1_enc_plus:
0003ee 9513                      	inc		temph
0003ef 331c                      	cpi		temph,60
0003f0 f008                      	brlo	blp_segm_1_write_byte
0003f1 2711                      	clr		temph	
                                 
                                 blp_segm_1_write_byte:
0003f2 940e 02a0                 	call	HEX_TO_BCD
0003f4 e001                      	ldi		templ,1
0003f5 2ef0                      	mov		byte_address,templ
0003f6 940e 0284                 	call	Write_byte_to_DS1307
0003f8 940c 0533                 	jmp		exit_cp_proc
                                 
                                 ////////////////////////////////////////////////////////////////////
                                 cp_clock_mode_segm_2:
0003fa e002                      	ldi		templ,2											
0003fb 16e0                      	cp		set_segm,templ	
0003fc f4c9                      	brne	cp_clock_mode_segm_3
0003fd 940e 0295                 	call	BCD_TO_HEX												; 
0003ff fd96                      	sbrc	enc_state,EMPF
000400 940c 040a                 	jmp		blp_segm_2_enc_plus
000402 3010                      	cpi		temph,0
000403 f419                      	brne	blp_segm_2_dec_hour
000404 e117                      	ldi		temph,23
000405 940c 040e                 	jmp		blp_segm_2_write_byte
                                 	
                                 blp_segm_2_dec_hour:
000407 951a                      	dec		temph
000408 940c 040e                 	jmp		blp_segm_2_write_byte
                                 
                                 blp_segm_2_enc_plus:
00040a 9513                      	inc		temph
00040b 3118                      	cpi		temph,24
00040c f008                      	brlo	blp_segm_2_write_byte
00040d 2711                      	clr		temph
                                 
                                 blp_segm_2_write_byte:
00040e 940e 02a0                 	call	HEX_TO_BCD
000410 e002                      	ldi		templ,2
000411 2ef0                      	mov		byte_address,templ
000412 940e 0284                 	call	Write_byte_to_DS1307
000414 940c 0533                 	jmp		exit_cp_proc
                                 	
                                 ////////////////////////////////////////////////////////////////////
                                 cp_clock_mode_segm_3:
000416 e003                      	ldi		templ,3										
000417 16e0                      	cp		set_segm,templ	
000418 f4a9                      	brne	cp_clock_mode_segm_5											;  
000419 fd96                      	sbrc	enc_state,EMPF
00041a 940c 0424                 	jmp		blp_segm_3_enc_plus
00041c 3011                      	cpi		temph,1
00041d f419                      	brne	blp_segm_3_dec_day
00041e e017                      	ldi		temph,7
00041f 940c 0428                 	jmp		blp_segm_3_write_byte
                                 
                                 blp_segm_3_dec_day:
000421 951a                      	dec		temph
000422 940c 0428                 	jmp		blp_segm_3_write_byte
                                 
                                 blp_segm_3_enc_plus:	
000424 9513                      	inc		temph
000425 3018                      	cpi		temph,8
000426 f008                      	brlo	blp_segm_3_write_byte
000427 e011                      	ldi		temph,1
                                 
                                 blp_segm_3_write_byte:
000428 e003                      	ldi		templ,3
000429 2ef0                      	mov		byte_address,templ
00042a 940e 0284                 	call	Write_byte_to_DS1307
00042c 940c 0533                 	jmp		exit_cp_proc	
                                 
                                 ////////////////////////////////////////////////////////////////////
                                 cp_clock_mode_segm_5:
00042e e004                      	ldi		templ,4									
00042f 16e0                      	cp		set_segm,templ	
000430 f011                      	breq	cp_clock_mode_segm_5_intermed
000431 940c 0492                 	jmp		cp_clock_mode_segm_4
                                 cp_clock_mode_segm_5_intermed:													; 	
000433 e7a0                      	ldi		XL,LOW(TWI_BUFFER_IN)
000434 e0b0                      	ldi		XH,HIGH(TWI_BUFFER_IN)
000435 9614                      	adiw	XL,4
000436 911d                      	ld		temph,X+
000437 912d                      	ld		temp_2,X+
000438 913c                      	ld		temp_3,X
000439 940e 0295                 	call	BCD_TO_HEX	
                                 
                                 
00043b 3021                      	cpi		temp_2,1
00043c f061                      	breq	month_31
00043d 3023                      	cpi		temp_2,3
00043e f051                      	breq	month_31
00043f 3025                      	cpi		temp_2,5
000440 f041                      	breq	month_31
000441 3027                      	cpi		temp_2,7
000442 f031                      	breq	month_31
000443 3028                      	cpi		temp_2,8
000444 f021                      	breq	month_31
000445 3120                      	cpi		temp_2,0x10
000446 f011                      	breq	month_31
000447 3122                      	cpi		temp_2,0x12
000448 f089                      	breq	month_2	
                                 
                                 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   31 
                                 month_31:
000449 fd96                      	sbrc	enc_state,EMPF
00044a 940c 0454                 	jmp		blp_segm_5_month_31_plus
00044c 3011                      	cpi		temph,1
00044d f419                      	brne	blp_segm_5_month_31_dec
00044e e11f                      	ldi		temph,31
00044f 940c 048a                 	jmp		blp_segm_5_write_byte
                                 	
                                 blp_segm_5_month_31_dec:
000451 951a                      	dec		temph
000452 940c 048a                 	jmp		blp_segm_5_write_byte
                                 
                                 blp_segm_5_month_31_plus:
000454 9513                      	inc		temph
000455 3210                      	cpi		temph,32
000456 f198                      	brlo	blp_segm_5_write_byte
000457 e011                      	ldi		temph,1
000458 940c 048a                 	jmp		blp_segm_5_write_byte
                                 
                                 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;     
                                 month_2:
00045a 3022                      	cpi		temp_2,2
00045b f4f9                      	brne	month_30
00045c fd96                      	sbrc	enc_state,EMPF
00045d 940c 046d                 	jmp		blp_segm_5_month_2_plus
00045f 3011                      	cpi		temph,1
000460 f449                      	brne	blp_segm_5_month_2_dec
000461 7033                      	andi	temp_3,3
000462 3030                      	cpi		temp_3,0
000463 f419                      	brne	blp_segm_5_month_2_29
000464 e11c                      	ldi		temph,28
000465 940c 048a                 	jmp		blp_segm_5_write_byte
                                 
                                 blp_segm_5_month_2_29:
000467 e11d                      	ldi		temph,29
000468 940c 048a                 	jmp		blp_segm_5_write_byte
                                 
                                 blp_segm_5_month_2_dec:
00046a 951a                      	dec		temph
00046b 940c 048a                 	jmp		blp_segm_5_write_byte
                                 
                                 blp_segm_5_month_2_plus:
00046d 9513                      	inc		temph
00046e 7033                      	andi	temp_3,3
00046f 3030                      	cpi		temp_3,0
000470 f429                      	brne	blp_segm_5_month_2_29_plus
000471 311d                      	cpi		temph,29
000472 f0b8                      	brlo	blp_segm_5_write_byte
000473 e011                      	ldi		temph,1
000474 940c 048a                 	jmp		blp_segm_5_write_byte
                                 
                                 blp_segm_5_month_2_29_plus:
000476 311e                      	cpi		temph,30
000477 f090                      	brlo	blp_segm_5_write_byte
000478 e011                      	ldi		temph,1
000479 940c 048a                 	jmp		blp_segm_5_write_byte
                                 
                                 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;   30 
                                 month_30:
00047b fd96                      	sbrc	enc_state,EMPF
00047c 940c 0486                 	jmp		blp_segm_5_month_30_plus
00047e 3011                      	cpi		temph,1
00047f f419                      	brne	blp_segm_5_month_30_dec
000480 e11e                      	ldi		temph,30
000481 940c 048a                 	jmp		blp_segm_5_write_byte
                                 
                                 blp_segm_5_month_30_dec:
000483 951a                      	dec		temph
000484 940c 048a                 	jmp		blp_segm_5_write_byte
                                 
                                 blp_segm_5_month_30_plus:
000486 9513                      	inc		temph
000487 311f                      	cpi		temph,31
000488 f008                      	brlo	blp_segm_5_write_byte
000489 e011                      	ldi		temph,1
                                 
                                 blp_segm_5_write_byte:
00048a 940e 02a0                 	call	HEX_TO_BCD
00048c e004                      	ldi		templ,4
00048d 2ef0                      	mov		byte_address,templ
00048e 940e 0284                 	call	Write_byte_to_DS1307
000490 940c 0533                 	jmp		exit_cp_proc
                                 
                                 ////////////////////////////////////////////////////////////////////
                                 cp_clock_mode_segm_4:
000492 e005                      	ldi		templ,5									
000493 16e0                      	cp		set_segm,templ	
000494 f011                      	breq	cp_clock_mode_segm_4_intermed
000495 940c 0533                 	jmp		exit_cp_proc	
                                 cp_clock_mode_segm_4_intermed:													; 	
000497 e7a0                      	ldi		XL,LOW(TWI_BUFFER_IN)
000498 e0b0                      	ldi		XH,HIGH(TWI_BUFFER_IN)
000499 9615                      	adiw	XL,5
00049a 911c                      	ld		temph,X
00049b 940e 0295                 	call	BCD_TO_HEX
00049d fd96                      	sbrc	enc_state,EMPF
00049e 940c 04a8                 	jmp		cp_clock_mode_segm_4_enc_plus
0004a0 3011                      	cpi		temph,1
0004a1 f419                      	brne	cp_clock_mode_segm_4_dec
0004a2 e01c                      	ldi		temph,12
0004a3 940c 04ac                 	jmp		blp_segm_4_write_byte
                                 
                                 cp_clock_mode_segm_4_dec:
0004a5 951a                      	dec		temph
0004a6 940c 04ac                 	jmp		blp_segm_4_write_byte
                                 
                                 cp_clock_mode_segm_4_enc_plus:
0004a8 9513                      	inc		temph
0004a9 301d                      	cpi		temph,13
0004aa f008                      	brlo	blp_segm_4_write_byte
0004ab e011                      	ldi		temph,1
                                 
                                 blp_segm_4_write_byte:
0004ac 940e 02a0                 	call	HEX_TO_BCD
0004ae e005                      	ldi		templ,5
0004af 2ef0                      	mov		byte_address,templ
0004b0 940e 0284                 	call	Write_byte_to_DS1307
0004b2 940c 0533                 	jmp		exit_cp_proc	
                                 
                                 ////////////////////////////////////////////////////////////////////
                                 ////////////////////////////////////////////////////////////////////    
                                 cp_timer_mode:
0004b4 ff41                      	sbrs	state_flag,WWSM
0004b5 940c 0533                 	jmp		exit_cp_proc
                                 
                                 ////////////////////////////////////////////////////////////////////
0004b7 e000                      	ldi		templ,0
0004b8 16e0                      	cp		set_segm,templ
0004b9 f4b9                      	brne	cp_timer_mode_segm_1
0004ba fd96                      	sbrc	enc_state,EMPF											;   . 
0004bb 940c 04c7                 	jmp		cp_timer_mode_segm_0_plus
0004bd e00a                      	ldi		templ,10
0004be 1630                      	cp		sec_work,templ
0004bf f420                      	brsh	cp_timer_mode_segm_0_10
0004c0 e302                      	ldi		templ,50
0004c1 2e30                      	mov		sec_work,templ
0004c2 940c 0533                 	jmp		exit_cp_proc
                                 
                                 cp_timer_mode_segm_0_10:
0004c4 1a30                      	sub		sec_work,templ
0004c5 940c 0533                 	jmp		exit_cp_proc
                                 
                                 cp_timer_mode_segm_0_plus:
0004c7 e00a                      	ldi		templ,10
0004c8 0e30                      	add		sec_work,templ
0004c9 e30c                      	ldi		templ,60
0004ca 1630                      	cp		sec_work,templ
0004cb f410                      	brsh	cp_timer_mode_segm_0_plus_60
0004cc 940c 0533                 	jmp		exit_cp_proc
                                 
                                 cp_timer_mode_segm_0_plus_60:
0004ce 2433                      	clr		sec_work
0004cf 940c 0533                 	jmp		exit_cp_proc
                                 
                                 ////////////////////////////////////////////////////////////////////
                                 cp_timer_mode_segm_1:
0004d1 e001                      	ldi		templ,1
0004d2 16e0                      	cp		set_segm,templ
0004d3 f4a9                      	brne	cp_timer_mode_segm_2
0004d4 fd96                      	sbrc	enc_state,EMPF											;   . 
0004d5 940c 04e0                 	jmp		cp_timer_mode_segm_1_plus
0004d7 2044                      	tst		min_work
0004d8 f421                      	brne	cp_timer_mode_segm_1_not_zero
0004d9 e603                      	ldi		templ,99
0004da 2e40                      	mov		min_work,templ
0004db 940c 0533                 	jmp		exit_cp_proc
                                 	
                                 cp_timer_mode_segm_1_not_zero:
0004dd 944a                      	dec		min_work
0004de 940c 0533                 	jmp		exit_cp_proc
                                 
                                 cp_timer_mode_segm_1_plus:	
0004e0 9443                      	inc		min_work
0004e1 e604                      	ldi		templ,100
0004e2 1640                      	cp		min_work,templ
0004e3 f410                      	brsh	cp_timer_mode_segm_1_plus_100
0004e4 940c 0533                 	jmp		exit_cp_proc
                                 
                                 cp_timer_mode_segm_1_plus_100:
0004e6 2444                      	clr		min_work
0004e7 940c 0533                 	jmp		exit_cp_proc
                                 
                                 ////////////////////////////////////////////////////////////////////
                                 cp_timer_mode_segm_2:
0004e9 e002                      	ldi		templ,2
0004ea 16e0                      	cp		set_segm,templ
0004eb f4b9                      	brne	cp_timer_mode_segm_4
0004ec fd96                      	sbrc	enc_state,EMPF											;   . 
0004ed 940c 04f9                 	jmp		cp_timer_mode_segm_2_plus
0004ef e001                      	ldi		templ,1
0004f0 1650                      	cp		round_work,templ
0004f1 f421                      	brne	cp_timer_mode_segm_2_dec
0004f2 e603                      	ldi		templ,99
0004f3 2e50                      	mov		round_work,templ
0004f4 940c 0533                 	jmp		exit_cp_proc
                                 
                                 cp_timer_mode_segm_2_dec:
0004f6 945a                      	dec		round_work
0004f7 940c 0533                 	jmp		exit_cp_proc
                                 
                                 cp_timer_mode_segm_2_plus:
0004f9 9453                      	inc		round_work
0004fa e604                      	ldi		templ,100
0004fb 1650                      	cp		round_work,templ
0004fc f410                      	brsh	cp_timer_mode_segm_2_plus_100
0004fd 940c 0533                 	jmp		exit_cp_proc
                                 
                                 cp_timer_mode_segm_2_plus_100:
0004ff e001                      	ldi		templ,1
000500 2e50                      	mov		round_work,templ
000501 940c 0533                 	jmp		exit_cp_proc
                                 	
                                 ////////////////////////////////////////////////////////////////////
                                 cp_timer_mode_segm_4:
000503 e004                      	ldi		templ,4
000504 16e0                      	cp		set_segm,templ
000505 f4b9                      	brne	cp_timer_mode_segm_5
000506 fd96                      	sbrc	enc_state,EMPF											;   . 
000507 940c 0513                 	jmp		cp_timer_mode_segm_4_plus
000509 e00a                      	ldi		templ,10
00050a 1660                      	cp		sec_rest,templ
00050b f420                      	brsh	cp_timer_mode_segm_4_10
00050c e302                      	ldi		templ,50
00050d 2e60                      	mov		sec_rest,templ
00050e 940c 0533                 	jmp		exit_cp_proc
                                 
                                 cp_timer_mode_segm_4_10:
000510 1a60                      	sub		sec_rest,templ
000511 940c 0533                 	jmp		exit_cp_proc
                                 
                                 cp_timer_mode_segm_4_plus:
000513 e00a                      	ldi		templ,10
000514 0e60                      	add		sec_rest,templ
000515 e30c                      	ldi		templ,60
000516 1660                      	cp		sec_rest,templ
000517 f410                      	brsh	cp_timer_mode_segm_4_plus_60
000518 940c 0533                 	jmp		exit_cp_proc
                                 
                                 cp_timer_mode_segm_4_plus_60:
00051a 2466                      	clr		sec_rest
00051b 940c 0533                 	jmp		exit_cp_proc
                                 
                                 ////////////////////////////////////////////////////////////////////
                                 cp_timer_mode_segm_5:
00051d e005                      	ldi		templ,5
00051e 16e0                      	cp		set_segm,templ
00051f f499                      	brne	exit_cp_proc
000520 fd96                      	sbrc	enc_state,EMPF											;   . 
000521 940c 052c                 	jmp		cp_timer_mode_segm_5_plus
000523 2077                      	tst		min_rest
000524 f421                      	brne	cp_timer_mode_segm_5_not_zero
000525 e603                      	ldi		templ,99
000526 2e70                      	mov		min_rest,templ
000527 940c 0533                 	jmp		exit_cp_proc
                                 	
                                 cp_timer_mode_segm_5_not_zero:
000529 947a                      	dec		min_rest
00052a 940c 0533                 	jmp		exit_cp_proc
                                 
                                 cp_timer_mode_segm_5_plus:	
00052c 9473                      	inc		min_rest
00052d e604                      	ldi		templ,100
00052e 1670                      	cp		min_rest,templ
00052f f410                      	brsh	cp_timer_mode_segm_5_plus_100
000530 940c 0533                 	jmp		exit_cp_proc
                                 
                                 cp_timer_mode_segm_5_plus_100:
000532 2477                      	clr		min_rest
                                 		
                                 exit_cp_proc:
000533 9508                      ret
                                 
                                 
                                 
                                 .dseg
                                 
0000b6                           BUTTON_STATE:		.byte	1
                                 
0000b7                           BUTTON_COUNT:		.byte	2
                                 
0000b9                           SET_MODE_COUNTER:	.byte	1
                                 
                                 .cseg
                                 .include	"Timers.asm"
                                 
                                         .
                                 1.  1 -   10 .
                                 2.  1.
                                 3.  2.      t_count.         
                                 RPTF (     ),T2IF (   )  WWFF (    ).
                                 4.         sdi_high_time, sdi_low_time,
                                 sdi_high_data  sdi_low_data.      :
                                 - sdi_low_time = digit_number*2,
                                 - sdi_high_time = digit_number*2+1,
                                 - sdi_low_data = digit_number*2+12,
                                 - sdi_high_data = digit_number*2+13.
                                  ,        0,             
                                     . 
                                 5.   1.      / MBI5026,        .
                                       LE  OE      PORTA    .
                                 */
                                 
                                 
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////////////////////////////////								1
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                  Timer1_ON:
000534 e009                      	ldi		templ,(1<<CS10) | (1<<WGM12)
000535 bd0e                      	out		TCCR1B,templ
000536 e90f                      	ldi		templ,LOW(OCR1_REG)
000537 e010                      	ldi		temph,HIGH(OCR1_REG)	
000538 bd0a                      	out		OCR1AL,templ
000539 bd1b                      	out		OCR1AH,temph
00053a b709                      	in		templ,TIMSK
00053b 6100                      	sbr		templ,(1<<OCIE1A)
00053c bf09                      	out		TIMSK,templ
00053d 24cc                      	clr		mbi_clk_counter
00053e 9508                       ret
                                 
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////////////////////////////////								2
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                  Timer1_OFF:
00053f 2700                      	clr		templ
000540 bd0e                      	out		TCCR1B,templ	
000541 9508                       ret
                                 
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////////////////////////////////								3
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 //  2
                                 Timer2:
                                 //   	
000542 930f                      	push	templ
000543 931f                      	push	temph
000544 b70f                      	in		templ,SREG
000545 930f                      	push	templ												//7
                                 	
                                 //   	
000546 9583                      	inc		t_count												//8
                                 
                                 //    	
000547 3880                      	cpi		t_count,0x80
000548 f018                      	brlo	set_flicking_flag
000549 7f4b                      	cbr		state_flag,(1<<WWFF)
00054a 940c 054d                 	jmp		timer2_ww_mode
                                 set_flicking_flag:
00054c 6044                      	sbr		state_flag,(1<<WWFF)
                                 
                                 //  
                                 timer2_ww_mode:	
00054d ff40                      	sbrs	state_flag,WWVM
00054e 940c 0559                 	jmp		timer2_clock_mode
000550 fd41                      	sbrc	state_flag,WWSM
000551 940c 0559                 	jmp		timer2_clock_mode
                                 // 	
000553 3f84                      	cpi		t_count,F_TIMER2_BT
000554 f048                      	brlo	read_encoder_state
000555 2788                      	clr		t_count
000556 6140                      	sbr		state_flag,(1<<RPTF)	
000557 940c 055e                 	jmp		read_encoder_state
                                 
                                 // 
                                 timer2_clock_mode:
000559 2f08                      	mov		templ,t_count
00055a 730e                      	andi	templ,0x3E
00055b 330e                      	cpi		templ,0x3E
00055c f409                      	brne	read_encoder_state
00055d 6140                      	sbr		state_flag,(1<<RPTF)	
                                 
                                 //  
                                 read_encoder_state:
00055e b300                      	in		templ,PIND											;  ,    
00055f 710c                      	andi	templ,0x1C
000560 6800                      	sbr		templ,(1<<T2IF)
000561 7093                      	andi	enc_state,3
000562 2b90                      	or		enc_state,templ
                                 	
                                 
                                 //   
                                 change_digit_number:	
                                 	//call	Get_Next_Digit
                                 
                                 exit_timer2:
                                 // 		
000563 910f                      	pop		templ
000564 bf0f                      	out		SREG,templ
000565 911f                      	pop		temph
000566 910f                      	pop		templ
000567 9518                      reti
                                 
                                 
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////////////////////////////////								4
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                  Get_Next_Digit:
000568 e006                      	ldi		templ,6
000569 94d3                      	inc		digit_count
00056a 16d0                      	cp		digit_count,templ
00056b f008                      	brlo	digit_lower_six
00056c 24dd                      	clr		digit_count
                                 digit_lower_six:
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
00056d 2d1d                      	mov		temph,digit_count							;       
00056e 0f11                      	lsl		temph										;  2
00056f 2700                      	clr		templ
000570 e9c8                      	ldi		YL,LOW(OUTPUT_BUFFER)
000571 e0d0                      	ldi		YH,HIGH(OUTPUT_BUFFER)
000572 0fc1                      	add		YL,temph
000573 1fd0                      	adc		YH,templ
000574 9099                      	ld		sdi_low_time,Y+
000575 8088                      	ld		sdi_high_time,Y
000576 5f14                      	subi	temph,-12
000577 2700                      	clr		templ
000578 e9c8                      	ldi		YL,LOW(OUTPUT_BUFFER)
000579 e0d0                      	ldi		YH,HIGH(OUTPUT_BUFFER)
00057a 0fc1                      	add		YL,temph
00057b 1fd0                      	adc		YH,templ
00057c 90b9                      	ld		sdi_low_data,Y+
00057d 80a8                      	ld		sdi_high_data,Y
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
00057e bb05                      	out		PORT_ANODE,templ							;   
00057f 9ad9                      	sbi		PORT_CATHODE,OE
000580 24cc                      	clr		mbi_clk_counter
                                 
                                 	
                                 /*	ldi		templ,0xAA
                                 	call	Send_UART*/
                                 /*	mov		templ,round_work
                                 	call	Send_UART*/
                                 /*	mov		templ,sdi_low_time
                                 	call	Send_UART
                                 	mov		templ,sdi_high_time
                                 	call	Send_UART
                                 	mov		templ,sdi_low_data
                                 	call	Send_UART
                                 	mov		templ,sdi_high_data
                                 	call	Send_UART*/
                                 
000581 940e 0534                 	call	Timer1_ON									;  1 (  / MBI5026)
                                 
000583 9508                      ret
                                 
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////////////////////////////////								5
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                  Timer1:
000584 93ef                      	push	ZL
000585 93ff                      	push	ZH	
000586 930f                      	push	templ
000587 931f                      	push	temph
000588 b70f                      	in		templ,SREG
000589 930f                      	push	templ	
                                 		
00058a fcc5                      	sbrc	mbi_clk_counter,5
00058b c012                      	rjmp	data_latch_end								//   32
00058c fcc0                      	sbrc	mbi_clk_counter,0				
00058d c00e                      	rjmp	set_clk_line								//  
                                  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
00058e fe87                      	sbrs	sdi_high_time,7								//  sdi        sdi_high
00058f 98da                      	cbi		PORT_CATHODE,SDI_TIME
000590 fc87                      	sbrc	sdi_high_time,7
000591 9ada                      	sbi		PORT_CATHODE,SDI_TIME
000592 fea7                      	sbrs	sdi_high_data,7							
000593 98dd                      	cbi		PORT_CATHODE,SDI_DATA
000594 fca7                      	sbrc	sdi_high_data,7
000595 9add                      	sbi		PORT_CATHODE,SDI_DATA
                                  
000596 1c99                       	rol		sdi_low_time								//  1    sdi
000597 1c88                      	rol		sdi_high_time 
000598 1cbb                      	rol		sdi_low_data
000599 1caa                      	rol		sdi_high_data 
                                 
00059a 98db                      	cbi		PORT_CATHODE,CLK						//  0  clk  
00059b c01a                      	rjmp	exit_timer1
                                  set_clk_line:
00059c 9adb                      	sbi		PORT_CATHODE,CLK						//  1  clk  
00059d c018                      	rjmp	exit_timer1	
                                  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                  //  ,         LE  1
                                  //   OE  0
                                  data_latch_end:
00059e fcc1                       	sbrc	mbi_clk_counter,1							//   32(bit0=0, bit1=0) -  0  clk,  33(bit0=1, bit1=0)  LE 1				
00059f c008                      	rjmp	line_le_oe
0005a0 fcc0                      	sbrc	mbi_clk_counter,0	
0005a1 c004                      	rjmp	set_le_line
0005a2 98db                      	cbi		PORT_CATHODE,CLK
0005a3 98da                      	cbi		PORT_CATHODE,SDI_TIME
0005a4 98dd                      	cbi		PORT_CATHODE,SDI_DATA
0005a5 c010                      	rjmp	exit_timer1
                                  set_le_line:
0005a6 9adc                      	sbi		PORT_CATHODE,LE
0005a7 c00e                      	rjmp	exit_timer1
                                  //   34(bit0=0, bit1=1) -  0  LE,  35(bit0=1, bit1=1)  0  OE
                                  line_le_oe:
0005a8 fcc0                      	sbrc	mbi_clk_counter,0	
0005a9 c002                      	rjmp	clr_oe_line
0005aa 98dc                      	cbi		PORT_CATHODE,LE
0005ab c00a                      	rjmp	exit_timer1
                                  clr_oe_line:
0005ac 98d9                      	cbi		PORT_CATHODE,OE
0005ad 2700                      	clr		templ
0005ae e8e0                      	ldi		ZL,LOW(2*ANODE_OUTPUT)						;     
0005af e0fb                      	ldi		ZH,HIGH(2*ANODE_OUTPUT)
0005b0 0ded                      	add		ZL,digit_count
0005b1 1ff0                      	adc		ZH,templ
0005b2 9104                      	lpm		templ,Z
0005b3 bb05                      	out		PORT_ANODE,templ
0005b4 940e 053f                 	call	Timer1_OFF
                                 
                                  //,   
                                  exit_timer1:
0005b6 94c3                      	inc		mbi_clk_counter	
0005b7 910f                      	pop		templ
0005b8 bf0f                      	out		SREG,templ
0005b9 911f                      	pop		temph
0005ba 910f                      	pop		templ
0005bb 91ff                      	pop		ZH
0005bc 91ef                      	pop		ZL
0005bd 9518                       reti
                                 
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////////////////////////////////						6		
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Timer2_ON:
                                 /*	ldi		templ,(1<<COM21) | (1<<WGM21) | (1<<WGM20) | PRESCALER_0
                                 	out		TCCR2,templ
                                 	ldi		templ,120
                                 	out		OCR2,templ
                                 	ldi		templ,(1<<TOIE2)
                                 	out		TIMSK,templ*/
0005be 9508                      ret
                                 
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////////////////////////////////						7		
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Timer2_OFF:
                                 /*	clr		templ
                                 	out		TCCR2,templ*/
0005bf 9508                      ret
                                 
                                 
                                 
                                  ANODE_OUTPUT:
0005c0 0804
0005c1 2010
0005c2 8040                      	.db		0x04,	0x08,	0x10,	0x20,	0x40,	0x80
                                 
                                 .include	"UARTFunctions.asm"
                                 
                                        UART
                                 1.     ,      templ.
                                 2.        .
                                 3.       .     ""  ,      .
                                             +   .
                                 4.     .  -       9 ( ""  ""    9),
                                      .     ,    , 
                                    (    = 0xCC).    ,   7     .
                                      ,      ,     
                                 UART_TEMP          TWI_BUFFER_OUT.
                                 5.      UART_TEMP         TWI_BUFFER_OUT.    TWI_BUFFER_OUT -   + 
                                 /,  -     ,  -   ( 7).
                                 */
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	1
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Send_UART:
0005c3 9b5d                      	sbis	UCSRA,UDRE
0005c4 cffe                      	rjmp	Send_UART
0005c5 b90c                      	out		UDR,templ
0005c6 9508                      ret
                                 
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	2
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 UART_TX:
0005c7 930f                      	push	templ
0005c8 931f                      	push	temph
0005c9 b70f                      	in		templ,SREG
0005ca 930f                      	push	templ
                                 
0005cb 3077                      	cpi		count,7
0005cc f448                      	brsh	exit_uart_tx
0005cd 2711                      	clr		temph
0005ce e7a0                      	ldi		XL,LOW(TWI_BUFFER_IN)
0005cf e0b0                      	ldi		XH,HIGH(TWI_BUFFER_IN)
0005d0 0fa7                      	add		XL,count
0005d1 1fb1                      	adc		XH,temph
0005d2 910c                      	ld		templ,X
0005d3 940e 05c3                 	call	Send_UART	
                                 
0005d5 9573                      	inc		count
                                 
                                 exit_uart_tx:	
0005d6 910f                      	pop		templ
0005d7 bf0f                      	out		SREG,templ
0005d8 911f                      	pop		temph
0005d9 910f                      	pop		templ
0005da 9518                      reti
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	3
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 UART_RX:
0005db 932f                      	push	temp_2
0005dc 930f                      	push	templ
0005dd 931f                      	push	temph
0005de 93af                      	push	XL
0005df 93bf                      	push	XH
0005e0 93cf                      	push	YL
0005e1 93df                      	push	YH
0005e2 b70f                      	in		templ,SREG
0005e3 930f                      	push	templ
                                 
0005e4 b10c                      	in		templ,UDR
0005e5 940e 05c3                 	call	Send_UART
0005e7 2722                      	clr		temp_2
0005e8 ebaa                      	ldi		XL,LOW(RX_HEAD)
0005e9 e0b0                      	ldi		XH,HIGH(RX_HEAD)
0005ea 911c                      	ld		temph,X
                                 		
0005eb ebcc                      	ldi		YL,LOW(UART_IN)
0005ec e0d0                      	ldi		YH,HIGH(UART_IN)
0005ed 0fc1                      	add		YL,temph
0005ee 1fd2                      	adc		YH,temp_2
0005ef 8308                      	st		Y,templ
                                 
0005f0 9513                      	inc		temph
0005f1 731f                      	andi	temph,0x3F
0005f2 931c                      	st		X,temph
                                 
0005f3 910f                      	pop		templ
0005f4 bf0f                      	out		SREG,templ
0005f5 91df                      	pop		YH
0005f6 91cf                      	pop		YL
0005f7 91bf                      	pop		XH
0005f8 91af                      	pop		XL
0005f9 911f                      	pop		temph
0005fa 910f                      	pop		templ
0005fb 912f                      	pop		temp_2
0005fc 9518                      reti
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	4
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 UART_proc:
0005fd ebaa                      	ldi		XL,LOW(RX_HEAD)							; 
0005fe e0b0                      	ldi		XH,HIGH(RX_HEAD)
0005ff 911c                      	ld		temph,X
                                 
000600 ebcb                      	ldi		YL,LOW(RX_TAIL)							; 
000601 e0d0                      	ldi		YH,HIGH(RX_TAIL)
000602 8108                      	ld		templ,Y
                                 
000603 2f20                      	mov		temp_2,templ
000604 2f31                      	mov		temp_3,temph
                                 
000605 1b32                      	sub		temp_3,temp_2							;      
000606 733f                      	andi	temp_3,0x3F									
                                 
000607 3039                      	cpi		temp_3,9								;        9   ( )
000608 f410                      	brsh	uart_packet_income
000609 940c 0632                 	jmp		exit_uart_proc
                                 
                                 uart_packet_income:
00060b 2733                      	clr		temp_3									;  
00060c ebac                      	ldi		XL,LOW(UART_IN)							
00060d e0b0                      	ldi		XH,HIGH(UART_IN)
00060e 0fa0                      	add		XL,templ
00060f 1fb3                      	adc		XH,temp_3
000610 912d                      	ld		temp_2,X+
                                 
000611 3c2c                      	cpi		temp_2,0xCC								;,     
000612 f029                      	breq	packet_start_byte
000613 9503                      	inc		templ									; ,   
000614 730f                      	andi	templ,0x3F
000615 8308                      	st		Y,templ
000616 940c 05fd                 	jmp		UART_proc
                                 
                                 packet_start_byte:									;   ,   8   
000618 efcc                      	ldi		YL,LOW(UART_TEMP)							
000619 e0d0                      	ldi		YH,HIGH(UART_TEMP)						;       ,    
00061a 2711                      	clr		temph									;        (  TWI_BUFFER_OUT)
                                 
                                 next_uart_byte:
00061b 913d                      	ld		temp_3,X+
00061c 9339                      	st		Y+,temp_3
00061d 0f23                      	add		temp_2,temp_3
00061e 9513                      	inc		temph
00061f 3017                      	cpi		temph,7
000620 f3d0                      	brlo	next_uart_byte
                                 
000621 913c                      	ld		temp_3,X
000622 1723                      	cp		temp_2,temp_3
000623 f039                      	breq	crc_is_good
000624 9503                      	inc		templ
000625 730f                      	andi	templ,0x3F
000626 ebcb                      	ldi		YL,LOW(RX_TAIL)							; 
000627 e0d0                      	ldi		YH,HIGH(RX_TAIL)
000628 8308                      	st		Y,templ
                                 
000629 940c 05fd                 	jmp		UART_proc
                                 
                                 crc_is_good:
00062b 5f07                      	subi	templ,-9
00062c 730f                      	andi	templ,0x3F
00062d ebcb                      	ldi		YL,LOW(RX_TAIL)							;   ,     9    
00062e e0d0                      	ldi		YH,HIGH(RX_TAIL)
00062f 8308                      	st		Y,templ									
                                 	
000630 940e 0633                 	call	Write_packet_to_TWI_buffer				;        
                                 	
                                 exit_uart_proc:
000632 9508                      ret
                                 
                                 
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////	5
                                 /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Write_packet_to_TWI_buffer:
000633 2711                      	clr		temph
000634 e6a0                      	ldi		XL,LOW(TWI_BUFFER_OUT)										; ,        
000635 e0b0                      	ldi		XH,HIGH(TWI_BUFFER_OUT)
000636 efcc                      	ldi		YL,LOW(UART_TEMP)											;  
000637 e0d0                      	ldi		YH,HIGH(UART_TEMP)
000638 ed00                      	ldi		templ,(DS1307_ADDRESS<<1)|write								;  -  / +  
000639 930d                      	st		X+,templ													;  -     
00063a 2700                      	clr		templ														;  -      
00063b 930d                      	st		X+,templ
                                 write_next_byte_to_twi_buffer:
00063c 9109                      	ld		templ,Y+
00063d 930d                      	st		X+,templ
00063e 9513                      	inc		temph
00063f 3017                      	cpi		temph,7
000640 f7d9                      	brne	write_next_byte_to_twi_buffer	
000641 e069                      	ldi		twi_packet_size,9
000642 2700                      	clr		templ
000643 2ef0                      	mov		byte_address,templ
000644 940e 0063                 	call	Start
000646 940e 00d4                 	call	Wait_TWI_finish	
                                 
000648 9508                      ret	
                                 
                                 .dseg	
                                 
0000ba                           RX_HEAD:		.byte	1
                                 
0000bb                           RX_TAIL:		.byte	1
                                 
0000bc                           UART_IN:		.byte	64
                                 
0000fc                           UART_TEMP:		.byte	7
                                 
                                 .cseg
                                 .include	"ADC.asm"
                                 
                                      ,   ,
                                    .
                                 1. ,  ,      .  
                                  OCR  1.
                                 */
                                 
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////////////////////////////////								1
                                 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Set_brightness:
                                  // 
000649 9a36                      	sbi		ADCSRA,ADSC
                                  wait_conv:
00064a 9936                      	sbic	ADCSRA,ADSC
00064b 940c 064a                 	jmp		wait_conv
00064d b104                      	in		templ,ADCL
00064e b115                      	in		temph,ADCH
                                 
                                 /*	ldi		templ,0xFF
                                 	sub		templ,temph*/
00064f 3f1f                      	cpi		temph,0xFF
000650 f409                      	brne	not_abs_dark
000651 ef1e                      	ldi		temph,0xFE
                                 not_abs_dark:
000652 940e 0655                 	call	Average_measure
000654 9508                      ret
                                 
                                 
                                 Average_measure:
000655 e0a3                      	ldi		XL,LOW(ADC_NUM)							;       
000656 e0b1                      	ldi		XH,HIGH(ADC_NUM)
000657 910c                      	ld		templ,X
                                 	
000658 2722                      	clr		temp_2
000659 e0c4                      	ldi		YL,LOW(ADC_RES)							;    
00065a e0d1                      	ldi		YH,HIGH(ADC_RES)
00065b 0fc0                      	add		YL,templ
00065c 1fd2                      	adc		YH,temp_2
00065d 8318                      	st		Y,temph
                                 
00065e 9503                      	inc		templ									;     32        
00065f 3200                      	cpi		templ,32
000660 f018                      	brlo	adc_res_num_low
000661 2700                      	clr		templ
000662 940e 0666                 	call	Calculate_average
                                 adc_res_num_low:
000664 930c                      	st		X,templ
                                 	
000665 9508                      ret
                                 
                                 
                                 Calculate_average:
000666 930f                      	push	templ
                                 
000667 2722                      	clr		temp_2
000668 2733                      	clr		temp_3
000669 2700                      	clr		templ
00066a 2777                      	clr		count
00066b e0c4                      	ldi		YL,LOW(ADC_RES)
00066c e0d1                      	ldi		YH,HIGH(ADC_RES)
                                 
                                 aver_calc_next_byte:
00066d 9119                      	ld		temph,Y+
00066e 0f21                      	add		temp_2,temph								; temp_3:temp_2      
00066f 1f30                      	adc		temp_3,templ
000670 9573                      	inc		count
000671 3270                      	cpi		count,32
000672 f3d0                      	brlo	aver_calc_next_byte
                                 
000673 0f22                      	lsl		temp_2										;  8 (  3 )  
000674 1f33                      	rol		temp_3
000675 0f22                      	lsl		temp_2										
000676 1f33                      	rol		temp_3
000677 0f22                      	lsl		temp_2										
000678 1f33                      	rol		temp_3										;temp_3      
                                 
000679 2f13                      	mov		temph,temp_3
00067a bd13                      	out		OCR2,temph
                                 
                                 /*	mov		templ,temph
                                 	call	Send_UART*/
                                 
00067b 910f                      	pop		templ
00067c 9508                      ret	
                                 
                                 .dseg
                                 
000103                           ADC_NUM:		.byte	1
                                 
000104                           ADC_RES:		.byte	32
                                 
                                 .cseg
                                 .include	"TimeCorrect.asm"
                                 
                                      
                                 
                                 1.   .    ,         , -     
                                 ,      DS1307.   ,   ,   .  
                                                   -.
                                 
                                 2.       (     )      
                                 .         .
                                 
                                 3.       (     ).  -   temph.
                                 */
                                 
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////							1
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Correct_time:
                                 
                                 	//   -  
00067d e7a0                      	ldi		XL,LOW(TWI_BUFFER_IN)
00067e e0b0                      	ldi		XH,HIGH(TWI_BUFFER_IN)
00067f 9612                      	adiw	XL,2
000680 910c                      	ld		templ,X
                                 	//  ,    (    01:00:00)
000681 3001                      	cpi		templ, 1
000682 f519                      	brne	exit_correct_time_proc
000683 910e                      	ld		templ,-X													;
000684 3000                      	cpi		templ,0
000685 f501                      	brne	exit_correct_time_proc
000686 910e                      	ld		templ,-X													;
000687 3000                      	cpi		templ,0
000688 f469                      	brne	check_stop_correction_time	
000689 940e 06ae                 	call	Read_time_inaccuracy_from_RAM
                                 	//    -    (  = 1) - ,  - 
00068b ff17                      	sbrs	temph,7														
00068c c007                      	rjmp	clock_ahead
                                 	//  -       
00068d 9511                      	neg		temph														;  
00068e 940e 02a0                 	call	HEX_TO_BCD													;   bcd    
000690 24ff                      	clr		byte_address
000691 940e 0284                 	call	Write_byte_to_DS1307
000693 c012                      	rjmp	exit_correct_time_proc
                                 
                                 	//  
                                 clock_ahead:
000694 6041                      	sbr		state_flag,WWSM												; ,  ,     
000695 c010                      	rjmp	exit_correct_time_proc
                                 
                                 // ,         1  00 ,    =   + 1
                                 //     = 1:00:01    WWSM
                                 check_stop_correction_time:
000696 ff41                      	sbrs	state_flag,WWSM
000697 c00e                      	rjmp	exit_correct_time_proc
000698 2f10                      	mov		temph,templ
000699 940e 0295                 	call	BCD_TO_HEX
00069b 2f01                      	mov		templ,temph													;    BCD 
00069c 940e 06ae                 	call	Read_time_inaccuracy_from_RAM								;  -  temph
00069e 9513                      	inc		temph
00069f 1710                      	cp		temph,templ													;         + 1
0006a0 f429                      	brne	exit_correct_time_proc
0006a1 7f4e                      	cbr		state_flag,WWSM												; 
0006a2 e011                      	ldi		temph,1
0006a3 24ff                      	clr		byte_address
0006a4 940e 0284                 	call	Write_byte_to_DS1307										;     = 1
                                 
                                 exit_correct_time_proc:
0006a6 9508                      ret
                                 
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////							2
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Read_write_time_inaccuracy:	
0006a7 e6e4                      	ldi		ZL,LOW(2*TIME_INACCURACY_SEC_PER_DAY_CONST)					;      -
0006a8 e0fd                      	ldi		ZH,HIGH(2*TIME_INACCURACY_SEC_PER_DAY_CONST)
0006a9 9104                      	lpm		templ,Z
                                 	
0006aa e2a4                      	ldi		XL,LOW(TIME_INACCURACY_SEC_PER_DAY_TEMP)					;       
0006ab e0b1                      	ldi		XH,HIGH(TIME_INACCURACY_SEC_PER_DAY_TEMP)
0006ac 930c                      	st		X,templ
0006ad 9508                      ret
                                 
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 //////////							3
                                 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                 
                                 Read_time_inaccuracy_from_RAM:
0006ae e2a4                      	ldi		XL,LOW(TIME_INACCURACY_SEC_PER_DAY_TEMP)					;       
0006af e0b1                      	ldi		XH,HIGH(TIME_INACCURACY_SEC_PER_DAY_TEMP)
0006b0 911c                      	ld		temph,X
0006b1 9508                      ret
                                 
                                 .dseg 
                                 
000124                           TIME_INACCURACY_SEC_PER_DAY_TEMP:	.byte	1
                                 
                                 .cseg
                                 
                                 TIME_INACCURACY_SEC_PER_DAY_CONST:
0006b2 0006                      		.db		0x06,	0x00
                                 
                                 program_begin:
                                 
0006b3 940e 02c7                 call	Start_time
0006b5 940e 06a7                 call	Read_write_time_inaccuracy						;         -     
                                 
                                 main:
                                 //           
0006b7 ff97                      	sbrs	enc_state,T2IF
0006b8 940c 06be                 	jmp		read_next_packet_main
0006ba 940e 0568                 	call	Get_Next_Digit
0006bc 940e 02f7                 	call	Encoder_proc
                                 read_next_packet_main:
0006be ff44                      	sbrs	state_flag,RPTF
0006bf 940c 06b7                 	jmp		main
                                 //    
0006c1 ff40                      	sbrs	state_flag,WWVM
0006c2 940e 00d8                 	call	Clock_mode_proc							// 
0006c4 fd40                      	sbrc	state_flag,WWVM
0006c5 940e 016f                 	call	Timer_mode_proc							// 
0006c7 940e 05fd                 	call	UART_proc
0006c9 940e 0649                 	call	Set_brightness
                                 
0006cb 940c 06b7                 jmp	main
                                 
                                 
                                 
                                 


RESOURCE USE INFORMATION
------------------------

Notice:
The register and instruction counts are symbol table hit counts,
and hence implicitly used resources are not counted, eg, the
'lpm' instruction without operands implicitly uses r0 and z,
none of which are counted.

x,y,z are separate entities in the symbol table and are
counted separately from r26..r31 here.

.dseg memory usage only counts static data declared with .byte

"ATmega16A" register use summary:
x  :  58 y  :  42 z  :   6 r0 :  21 r1 :  13 r2 :  13 r3 :  11 r4 :  11 
r5 :  13 r6 :  12 r7 :  11 r8 :   4 r9 :   2 r10:   4 r11:   2 r12:   8 
r13:   5 r14:  29 r15:  19 r16: 360 r17: 138 r18:  63 r19:  35 r20:  72 
r21:  10 r22:  10 r23:  33 r24:   6 r25:  27 r26:  47 r27:  44 r28:  36 
r29:  36 r30:  19 r31:  18 
Registers used: 35 out of 35 (100.0%)

"ATmega16A" instruction use summary:
.lds  :   0 .sts  :   0 adc   :  21 add   :  24 adiw  :   5 and   :   0 
andi  :  19 asr   :   0 bclr  :   0 bld   :   0 brbc  :   0 brbs  :   0 
brcc  :   0 brcs  :   0 break :   0 breq  :  30 brge  :   3 brhc  :   0 
brhs  :   0 brid  :   0 brie  :   0 brlo  :  21 brlt  :   0 brmi  :   0 
brne  :  64 brpl  :   0 brsh  :  14 brtc  :   0 brts  :   0 brvc  :   0 
brvs  :   0 bset  :   0 bst   :   0 call  :  71 cbi   :  11 cbr   :  20 
clc   :   0 clh   :   0 cli   :   1 cln   :   0 clr   :  89 cls   :   0 
clt   :   0 clv   :   0 clz   :   0 com   :   0 cp    :  45 cpc   :   0 
cpi   :  81 cpse  :   0 dec   :  15 eor   :   0 fmul  :   0 fmuls :   0 
fmulsu:   0 icall :   0 ijmp  :   0 in    :  15 inc   :  41 jmp   : 156 
ld    :  32 ldd   :   0 ldi   : 234 lds   :   0 lpm   :  11 lsl   :  14 
lsr   :   3 mov   :  45 movw  :   0 mul   :   0 muls  :   0 mulsu :   0 
neg   :   1 nop   :   0 or    :   3 ori   :   2 out   :  46 pop   :  25 
push  :  25 rcall :   0 ret   :  37 reti  :   5 rjmp  :  25 rol   :   7 
ror   :   0 sbc   :   1 sbci  :   0 sbi   :  17 sbic  :   1 sbis  :   1 
sbiw  :   0 sbr   :  16 sbrc  :  36 sbrs  :  29 sec   :   0 seh   :   0 
sei   :   2 sen   :   0 ser   :   0 ses   :   0 set   :   0 sev   :   0 
sez   :   0 sleep :   0 spm   :   0 st    :  68 std   :   0 sts   :   0 
sub   :   4 subi  :   8 swap  :   3 tst   :   6 wdr   :   0 
Instructions used: 49 out of 113 (43.4%)

"ATmega16A" memory use summary [bytes]:
Segment   Begin    End      Code   Data   Used    Size   Use%
---------------------------------------------------------------
[.cseg] 0x000000 0x000d9a   3350     84   3434   16384  21.0%
[.dseg] 0x000060 0x000125      0    197    197    1024  19.2%
[.eseg] 0x000000 0x000000      0      0      0     512   0.0%

Assembly complete, 0 errors, 0 warnings
